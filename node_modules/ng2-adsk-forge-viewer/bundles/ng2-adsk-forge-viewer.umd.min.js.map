{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/ng2-adsk-forge-viewer/src/lib/service/script.service.ts","../../../projects/ng2-adsk-forge-viewer/src/lib/extensions/extension.ts","../../../projects/ng2-adsk-forge-viewer/src/lib/extensions/basic-extension.ts","../../../projects/ng2-adsk-forge-viewer/src/lib/component/viewer.component.ts","../../../projects/ng2-adsk-forge-viewer/src/lib/component/thumbnail.component.ts","../../../projects/ng2-adsk-forge-viewer/src/lib/ng2-adsk-forge-viewer.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","pop","length","push","__values","o","s","m","i","__read","r","ar","error","__spread","arguments","concat","ScriptService","scripts","load","_this","urls","_i","promises","forEach","src","loaded","loadScript","all","name","status","script","document","createElement","type","readyState","onreadystatechange","onload","onerror","getElementsByTagName","appendChild","Injectable","AggregationSelectionChangedEventArgs","_super","Autodesk","Viewing","AGGREGATE_SELECTION_CHANGED_EVENT","ViewerEventArgs","AnimationReadyEventArgs","ANIMATION_READY_EVENT","CameraChangedEventArgs","CAMERA_CHANGE_EVENT","CutplanesChangedEventArgs","CUTPLANES_CHANGE_EVENT","EscapeEventArgs","ESCAPE_EVENT","ExplodeChangedEventArgs","EXPLODE_CHANGE_EVENT","ExtensionLoadedUnloadedEventArgs","ExtensionLoadedEventArgs","EXTENSION_LOADED_EVENT","ExtensionUnloadedEventArgs","EXTENSION_UNLOADED_EVENT","FinalFrameRenderedChangedEventArgs","FINAL_FRAME_RENDERED_CHANGED_EVENT","FitToViewEventArgs","FIT_TO_VIEW_EVENT","FragmentsLoadedEventArgs","FRAGMENTS_LOADED_EVENT","FullscreenEventArgs","FULLSCREEN_MODE_EVENT","GeometryLoadedEventArgs","GEOMETRY_LOADED_EVENT","HideEventArgs","HIDE_EVENT","HyperlinkEventArgs","HYPERLINK_EVENT","IsolateEventArgs","ISOLATE_EVENT","LayerVisibilityEventArgs","LAYER_VISIBILITY_CHANGED_EVENT","LoadMissingGeometryEventArgs","LOAD_MISSING_GEOMETRY","ModelRootLoadedEventArgs","MODEL_ROOT_LOADED_EVENT","ModelUnloadedEventArgs","MODEL_UNLOADED_EVENT","NavigationModeChangedEventArgs","NAVIGATION_MODE_CHANGED_EVENT","ObjectTreeEventArgs","ObjectTreeCreatedEventArgs","OBJECT_TREE_CREATED_EVENT","ObjectTreeUnavailableEventArgs","OBJECT_TREE_UNAVAILABLE_EVENT","PrefEventArgs","PrefChangedEventArgs","PREF_CHANGED_EVENT","PrefResetEventArgs","PREF_RESET_EVENT","ProgressUpdateEventArgs","PROGRESS_UPDATE_EVENT","RenderOptionChangedEventArgs","RENDER_OPTION_CHANGED_EVENT","RenderPresentedEventArgs","RENDER_PRESENTED_EVENT","ResetEventArgs","RESET_EVENT","RestoreDefaultSettingsEventArgs","RESTORE_DEFAULT_SETTINGS_EVENT","SelectionChangedEventArgs","SELECTION_CHANGED_EVENT","ShowEventArgs","SHOW_EVENT","TexturesLoadedEventArgs","TEXTURES_LOADED_EVENT","ToolChangedEventArgs","TOOL_CHANGE_EVENT","ViewerInitializedEventArgs","VIEWER_INITIALIZED","ViewerResizeEventArgs","VIEWER_RESIZE_EVENT","ViewerStateRestoredEventArgs","VIEWER_STATE_RESTORED_EVENT","ViewerUnInitializedEventArgs","VIEWER_UNINITIALIZED","Extension","viewer","options","undefined","extOptions","eventArgsTypeMap","registerEventTypes","registerExtension","extensionName","extension","theExtensionManager","unregisterExtension","castArgs","args","isArray","map","clazz","typedItem","_b","keys","_c","k","BasicExtension","eventStreams","events","callback","eventName","obs","fromEvent","pipe","viewerEvents","merge","debugMessages","console","log","unload","activate","deactivate","ViewerComponent","onDocumentChanged","EventEmitter","onItemLoaded","onError","onFitToView","onFullscreen","onGeometryLoaded","onHide","onIsolate","onObjectTreeCreated","onObjectTreeUnavailable","onReset","onSelectionChanged","onShow","showDebugMessages","_viewerOptions","viewerInitialized","unsubscribe","Subject","containerId","getDivName","verifyUrn","documentId","startsWith","defineProperty","initialiseViewer","ngOnDestroy","unregisterBasicExtension","tearDown","uninitialize","complete","getDefaultViewerOptions","onViewerInitialized","getAccessToken","initializerOptions","env","api","loadModel","getElementById","basicExt","loadDocumentNode","bubbleNode","loadScripts","url","viewerOptions","version","data","catch","onViewerScriptsLoaded","Private","setTimeout","initialized","Initializer","extName","registerBasicExtension","config","addBasicExtensionConfig","enableMemoryManagement","loaderExtensions","svf","headlessViewer","Viewer3D","Container","GuiViewer3D","_a","start","viewerComponent","Document","onDocumentLoadSuccess","bind","onDocumentLoadFailure","getRoot","emit","showFirstViewable","model","getDefaultGeometry","search","errorCode","extensionLoaded","ext","takeUntil","subscribe","item","assign","viewerConfig","extensions","message","optionalParams","S4","Math","random","toString","substring","Component","selector","template","changeDetection","ChangeDetectionStrategy","OnPush","Output","Input","ThumbnailComponent","http","sanitizer","ngOnChanges","thumbnailOptions","setImageSrc","defaultImageSrc","getThumbnail","opts","width","height","slice","setAccessToken","headers","Authorization","token","Content-Type","get","responseType","toBase64","accessToken","expiryTime","expire","btoa","fromCharCode","Uint8Array","imageSrc","bypassSecurityTrustUrl","HttpClient","DomSanitizer","NgModule","declarations","imports","HttpClientModule","exports","providers"],"mappings":";;;;;;;;;;;;;;oFAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,MAC3EN,EAAGC,aAGZS,EAAUV,EAAGC,GACzB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIU,UAAU,uBAAyBC,OAAOX,GAAK,iCAE7D,SAASY,IAAOC,KAAKC,YAAcf,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOc,OAAOf,IAAMY,EAAGN,UAAYN,EAAEM,UAAW,IAAIM,YAyCnEI,EAAUC,EAASC,EAAYC,EAAGC,GAE9C,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,oBAItDO,EAAYjB,EAASkB,GACjC,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAOpC,OAAU0B,EACvJ,SAASM,EAAKK,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAIhB,EAAG,MAAM,IAAI1B,UAAU,mCAC3B,KAAO8B,OACH,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARc,EAAG,GAASf,EAAU,OAAIe,EAAG,GAAKf,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAE9B,KAAK6B,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAE9B,KAAK6B,EAAGe,EAAG,KAAKrB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGc,EAAK,CAAS,EAARA,EAAG,GAAQd,EAAEb,QACzB2B,EAAG,IACP,KAAK,EAAG,KAAK,EAAGd,EAAIc,EAAI,MACxB,KAAK,EAAc,OAAXZ,EAAEC,QAAgB,CAAEhB,MAAO2B,EAAG,GAAIrB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIe,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKZ,EAAEI,IAAIS,MAAOb,EAAEG,KAAKU,MAAO,SACxC,QACI,KAAMf,EAAIE,EAAEG,MAAML,EAAIA,EAAEgB,OAAS,GAAKhB,EAAEA,EAAEgB,OAAS,KAAkB,IAAVF,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEZ,EAAI,EAAG,SACjG,GAAc,IAAVY,EAAG,MAAcd,GAAMc,EAAG,GAAKd,EAAE,IAAMc,EAAG,GAAKd,EAAE,IAAM,CAAEE,EAAEC,MAAQW,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYZ,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIc,EAAI,MAC7D,GAAId,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIW,KAAKH,GAAK,MACvDd,EAAE,IAAIE,EAAEI,IAAIS,MAChBb,EAAEG,KAAKU,MAAO,SAEtBD,EAAKjB,EAAK3B,KAAKS,EAASuB,GAC1B,MAAOZ,GAAKwB,EAAK,CAAC,EAAGxB,GAAIS,EAAI,UAAeD,EAAIE,EAAI,EACtD,GAAY,EAARc,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAE3B,MAAO2B,EAAG,GAAKA,EAAG,QAAK,EAAQrB,MAAM,GArB9BL,CAAK,CAACwB,EAAGC,MAyBhClD,OAAOc,gBAYpByC,EAASC,GACrB,IAAIC,EAAsB,mBAAXV,QAAyBA,OAAOC,SAAUU,EAAID,GAAKD,EAAEC,GAAIE,EAAI,EAC5E,GAAID,EAAG,OAAOA,EAAEnD,KAAKiD,GACrB,GAAIA,GAAyB,iBAAbA,EAAEH,OAAqB,MAAO,CAC1C3B,KAAM,WAEF,OADI8B,GAAKG,GAAKH,EAAEH,SAAQG,OAAI,GACrB,CAAEhC,MAAOgC,GAAKA,EAAEG,KAAM7B,MAAO0B,KAG5C,MAAM,IAAI/C,UAAUgD,EAAI,0BAA4B,4CAGxCG,EAAOJ,EAAGP,GACtB,IAAIS,EAAsB,mBAAXX,QAAyBS,EAAET,OAAOC,UACjD,IAAKU,EAAG,OAAOF,EACf,IAAmBK,EAAYlC,EAA3BgC,EAAID,EAAEnD,KAAKiD,GAAOM,EAAK,GAC3B,IACI,WAAc,IAANb,GAAgBA,KAAM,MAAQY,EAAIF,EAAEjC,QAAQI,MAAMgC,EAAGR,KAAKO,EAAErC,OAExE,MAAOuC,GAASpC,EAAI,CAAEoC,MAAOA,WAEzB,IACQF,IAAMA,EAAE/B,OAAS4B,EAAIC,EAAU,SAAID,EAAEnD,KAAKoD,WAExC,GAAIhC,EAAG,MAAMA,EAAEoC,OAE7B,OAAOD,WAIKE,IACZ,IAAK,IAAIF,EAAK,GAAIH,EAAI,EAAGA,EAAIM,UAAUZ,OAAQM,IAC3CG,EAAKA,EAAGI,OAAON,EAAOK,UAAUN,KACpC,OAAOG,EAyDc9D,OAAOc,wBC9L9B,SAAAqD,IAFQvD,KAAAwD,QAA4B,UAM7BD,EAAA9D,UAAAgE,KAAA,eAAA,IAAAC,EAAA1D,KAAK2D,EAAA,GAAAC,EAAA,EAAAA,EAAAP,UAAAZ,OAAAmB,IAAAD,EAAAC,GAAAP,UAAAO,GACV,IAAMC,EAAkC,GAWxC,OATAF,EAAKG,SAAQ,SAACC,GACZ,IAAIL,EAAKF,QAAQO,KAAQL,EAAKF,QAAQO,GAAKC,OAK3C,OADAN,EAAKF,QAAQO,GAAO,CAAEA,IAAGA,EAAEC,QAAQ,GAC5BH,EAASnB,KAAKgB,EAAKO,WAAWF,OAGhCvD,QAAQ0D,IAAIL,IAGdN,EAAA9D,UAAAwE,WAAA,SAAWE,GAAX,IAAAT,EAAA1D,KACL,OAAO,IAAIQ,SAAQ,SAACC,EAASC,GAE3B,GAAIgD,EAAKF,QAAQW,IAAST,EAAKF,QAAQW,GAAMH,OAC3CvD,EAAQ,CAAEsD,IAAKI,EAAMH,QAAQ,EAAMI,OAAQ,uBAD7C,CAMA,IAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,KAAO,kBACdH,EAAON,IAAML,EAAKF,QAAQW,GAAMJ,IAE5BM,EAAOI,WACTJ,EAAOK,mBAAqB,WACA,WAAtBL,EAAOI,YAAiD,aAAtBJ,EAAOI,aAC3CJ,EAAOK,mBAAqB,KAC5BhB,EAAKF,QAAQW,GAAMH,QAAS,EAE5BvD,EAAQ,CAAEsD,IAAKI,EAAMH,QAAQ,EAAMI,OAAQ,aAI/CC,EAAOM,OAAS,WACdjB,EAAKF,QAAQW,GAAMH,QAAS,EAE5BvD,EAAQ,CAAEsD,IAAKI,EAAMH,QAAQ,EAAMI,OAAQ,YAI/CC,EAAOO,QAAU,SAACzB,GAAe,OAAA1C,EAAQ,CAAEsD,IAAKI,EAAMH,QAAQ,EAAOI,OAAQ,YAC7EE,SAASO,qBAAqB,QAAQ,GAAGC,YAAYT,iCAvD1DU,EAAAA,yDCbD,2BAMA,SAAAC,IAAA,IAAAtB,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQC,2CAFgCxF,EAAAoF,EAAAC,MAAAI,iBAI1D,SAAAC,IAAA,IAAA5B,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQI,+BADmB3F,EAAA0F,EAAAL,MAAAI,iBAG7C,SAAAG,IAAA,IAAA9B,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQM,6BAFkB7F,EAAA4F,EAAAP,MAAAI,iBAI5C,SAAAK,IAAA,IAAAhC,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQQ,gCAFqB/F,EAAA8F,EAAAT,MAAAI,iBAI/C,SAAAO,IAAA,IAAAlC,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQU,sBADWjG,EAAAgG,EAAAX,MAAAI,iBAGrC,SAAAS,IAAA,IAAApC,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQY,8BAFmBnG,EAAAkG,EAAAb,MAAAI,iBAI7C,SAAAW,0DAA+DpG,EAAAoG,EAAAf,MAAAI,iBAG/D,SAAAY,IAAA,IAAAvC,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQe,gCADoBtG,EAAAqG,EAAAhB,MAAAe,iBAG9C,SAAAG,IAAA,IAAAzC,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQiB,kCADsBxG,EAAAuG,EAAAlB,MAAAe,iBAGhD,SAAAK,IAAA,IAAA3C,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQmB,4CAF8B1G,EAAAyG,EAAApB,MAAAI,iBAIxD,SAAAkB,IAAA,IAAA7C,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAGE0D,EAAAc,KAAOU,SAASC,QAAQqB,2BAHc5G,EAAA2G,EAAAtB,MAAAI,iBAKxC,SAAAoB,IAAA,IAAA/C,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAGE0D,EAAAc,KAAOU,SAASC,QAAQuB,gCAHoB9G,EAAA6G,EAAAxB,MAAAI,iBAK9C,SAAAsB,IAAA,IAAAjD,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQyB,+BAFehH,EAAA+G,EAAA1B,MAAAI,iBAIzC,SAAAwB,IAAA,IAAAnD,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQ2B,+BADmBlH,EAAAiH,EAAA5B,MAAAI,iBAG7C,SAAA0B,IAAA,IAAArD,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQ6B,oBAFSpH,EAAAmH,EAAA9B,MAAAI,iBAInC,SAAA4B,IAAA,IAAAvD,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQ+B,yBAFctH,EAAAqH,EAAAhC,MAAAI,iBAIxC,SAAA8B,IAAA,IAAAzD,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQiC,uBAFYxH,EAAAuH,EAAAlC,MAAAI,iBAItC,SAAAgC,IAAA,IAAA3D,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQmC,wCADoB1H,EAAAyH,EAAApC,MAAAI,iBAG9C,SAAAkC,IAAA,IAAA7D,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQqC,+BAFwB5H,EAAA2H,EAAAtC,MAAAI,iBAIlD,SAAAoC,IAAA,IAAA/D,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQuC,iCAFoB9H,EAAA6H,EAAAxC,MAAAI,iBAI9C,SAAAsC,IAAA,IAAAjE,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQyC,8BADkBhI,EAAA+H,EAAA1C,MAAAI,iBAG5C,SAAAwC,IAAA,IAAAnE,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQ2C,uCAF0BlI,EAAAiI,EAAA5C,MAAAI,iBAIpD,SAAA0C,0DAAkDnI,EAAAmI,EAAA9C,MAAAI,iBAGlD,SAAA2C,IAAA,IAAAtE,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQ8C,mCADsBrI,EAAAoI,EAAA/C,MAAA8C,iBAGhD,SAAAG,IAAA,IAAAxE,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQgD,uCAD0BvI,EAAAsI,EAAAjD,MAAA8C,iBAGpD,SAAAK,0DAA4CxI,EAAAwI,EAAAnD,MAAAI,iBAI5C,SAAAgD,IAAA,IAAA3E,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQmD,4BADgB1I,EAAAyI,EAAApD,MAAAmD,iBAG1C,SAAAG,IAAA,IAAA7E,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQqD,0BADc5I,EAAA2I,EAAAtD,MAAAmD,iBAGxC,SAAAK,IAAA,IAAA/E,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAGE0D,EAAAc,KAAOU,SAASC,QAAQuD,+BAHmB9I,EAAA6I,EAAAxD,MAAAI,iBAK7C,SAAAsD,IAAA,IAAAjF,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQyD,qCADwBhJ,EAAA+I,EAAA1D,MAAAI,iBAGlD,SAAAwD,IAAA,IAAAnF,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQ2D,gCADoBlJ,EAAAiJ,EAAA5D,MAAAI,iBAG9C,SAAA0D,IAAA,IAAArF,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQ6D,qBADUpJ,EAAAmJ,EAAA9D,MAAAI,iBAGpC,SAAA4D,IAAA,IAAAvF,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQ+D,wCAD2BtJ,EAAAqJ,EAAAhE,MAAAI,iBAGrD,SAAA8D,IAAA,IAAAzF,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAIE0D,EAAAc,KAAOU,SAASC,QAAQiE,iCAJqBxJ,EAAAuJ,EAAAlE,MAAAI,iBAM/C,SAAAgE,IAAA,IAAA3F,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQmE,oBAFS1J,EAAAyJ,EAAApE,MAAAI,iBAInC,SAAAkE,IAAA,IAAA7F,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQqE,+BADmB5J,EAAA2J,EAAAtE,MAAAI,iBAG7C,SAAAoE,IAAA,IAAA/F,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAIE0D,EAAAc,KAAOU,SAASC,QAAQuE,2BAJgB9J,EAAA6J,EAAAxE,MAAAI,iBAM1C,SAAAsE,IAAA,IAAAjG,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQyE,4BADsBhK,EAAA+J,EAAA1E,MAAAI,iBAGhD,SAAAwE,IAAA,IAAAnG,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAGE0D,EAAAc,KAAOU,SAASC,QAAQ2E,6BAHiBlK,EAAAiK,EAAA5E,MAAAI,kBAK3C,SAAA0E,IAAA,IAAArG,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAEE0D,EAAAc,KAAOU,SAASC,QAAQ6E,qCAFwBpK,EAAAmK,EAAA9E,MAAAI,kBAIlD,SAAA4E,IAAA,IAAAvG,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YACE0D,EAAAc,KAAOU,SAASC,QAAQ+E,8BADwBtK,EAAAqK,EAAAhF,MAAAI,iBAuBhD,SAAA8E,EAAYC,EACAC,GAdFrK,KAAAoK,YAAoCE,EACpCtK,KAAAuK,gBAAgDD,EAEhDtK,KAAAwK,iBAAgD,GAYxDxK,KAAKoK,OAASA,EACdpK,KAAKuK,WAAaF,EAElBrK,KAAKyK,4BAbON,EAAAO,kBAAP,SAAyBC,EAAuBC,GACrD1F,SAASC,QAAQ0F,oBAAoBH,kBAAkBC,EAAeC,IAG1DT,EAAAW,oBAAP,SAA2BH,GAChCzF,SAASC,QAAQ0F,oBAAoBC,oBAAoBH,IAqBjDR,EAAA1K,UAAAgL,mBAAA,WAERzK,KAAKwK,iBAAiBtF,SAASC,QAAQC,mCAAqCJ,EAC5EhF,KAAKwK,iBAAiBtF,SAASC,QAAQI,uBAAyBD,EAChEtF,KAAKwK,iBAAiBtF,SAASC,QAAQM,qBAAuBD,EAC9DxF,KAAKwK,iBAAiBtF,SAASC,QAAQQ,wBAA0BD,EACjE1F,KAAKwK,iBAAiBtF,SAASC,QAAQU,cAAgBD,EACvD5F,KAAKwK,iBAAiBtF,SAASC,QAAQY,sBAAwBD,EAC/D9F,KAAKwK,iBAAiBtF,SAASC,QAAQe,wBAA0BD,EACjEjG,KAAKwK,iBAAiBtF,SAASC,QAAQiB,0BAA4BD,EACnEnG,KAAKwK,iBAAiBtF,SAASC,QAAQmB,oCAAsCD,EAC7ErG,KAAKwK,iBAAiBtF,SAASC,QAAQqB,mBAAqBD,EAC5DvG,KAAKwK,iBAAiBtF,SAASC,QAAQuB,wBAA0BD,EACjEzG,KAAKwK,iBAAiBtF,SAASC,QAAQyB,uBAAyBD,EAChE3G,KAAKwK,iBAAiBtF,SAASC,QAAQ2B,uBAAyBD,EAChE7G,KAAKwK,iBAAiBtF,SAASC,QAAQ6B,YAAcD,EACrD/G,KAAKwK,iBAAiBtF,SAASC,QAAQ+B,iBAAmBD,EAC1DjH,KAAKwK,iBAAiBtF,SAASC,QAAQiC,eAAiBD,EACxDnH,KAAKwK,iBAAiBtF,SAASC,QAAQmC,gCAAkCD,EACzErH,KAAKwK,iBAAiBtF,SAASC,QAAQqC,uBAAyBD,EAChEvH,KAAKwK,iBAAiBtF,SAASC,QAAQuC,yBAA2BD,EAClEzH,KAAKwK,iBAAiBtF,SAASC,QAAQyC,sBAAwBD,EAC/D3H,KAAKwK,iBAAiBtF,SAASC,QAAQ2C,+BAAiCD,EACxE7H,KAAKwK,iBAAiBtF,SAASC,QAAQ8C,2BAA6BD,EACpEhI,KAAKwK,iBAAiBtF,SAASC,QAAQgD,+BAAiCD,EACxElI,KAAKwK,iBAAiBtF,SAASC,QAAQmD,oBAAsBD,EAC7DrI,KAAKwK,iBAAiBtF,SAASC,QAAQqD,kBAAoBD,EAC3DvI,KAAKwK,iBAAiBtF,SAASC,QAAQuD,uBAAyBD,EAChEzI,KAAKwK,iBAAiBtF,SAASC,QAAQyD,6BAA+BD,EACtE3I,KAAKwK,iBAAiBtF,SAASC,QAAQ2D,wBAA0BD,EACjE7I,KAAKwK,iBAAiBtF,SAASC,QAAQ6D,aAAeD,EACtD/I,KAAKwK,iBAAiBtF,SAASC,QAAQ+D,gCAAkCD,EACzEjJ,KAAKwK,iBAAiBtF,SAASC,QAAQiE,yBAA2BD,EAClEnJ,KAAKwK,iBAAiBtF,SAASC,QAAQmE,YAAcD,EACrDrJ,KAAKwK,iBAAiBtF,SAASC,QAAQqE,uBAAyBD,EAChEvJ,KAAKwK,iBAAiBtF,SAASC,QAAQuE,mBAAqBD,EAC5DzJ,KAAKwK,iBAAiBtF,SAASC,QAAQyE,oBAAsBD,EAC7D3J,KAAKwK,iBAAiBtF,SAASC,QAAQ2E,qBAAuBD,EAC9D7J,KAAKwK,iBAAiBtF,SAASC,QAAQ6E,6BAA+BD,GACtE/J,KAAKwK,iBAAiBtF,SAASC,QAAQ+E,sBAAwBD,IAKvDE,EAAA1K,UAAAsL,SAAA,SAASC,WACjB,GAAIzL,MAAM0L,QAAQD,GAChB,OAAOA,EAAKE,IAAIlL,KAAK+K,UAGvB,IAAKC,GAAwB,iBAATA,IAAsBA,EAAKtL,eAAe,QAE5D,OAAOsL,EAIT,IAAMG,EAAQnL,KAAKwK,iBAAiBQ,EAAKxG,MACnC4G,EAAYhM,OAAOc,OAAOiL,EAAM1L,eAGtC,IAAgB,IAAA4L,EAAA1I,EAAAvD,OAAOkM,KAAKN,IAAKO,EAAAF,EAAAvK,QAAAyK,EAAArK,KAAAqK,EAAAF,EAAAvK,OAAE,CAA9B,IAAM0K,EAACD,EAAA3K,MACVwK,EAAUI,GAAKxL,KAAK+K,SAASC,EAAKQ,sGAGpC,OAAOJ,QAhGKjB,GAAAQ,cAAwB,sBC/JxC,SAAAc,IAAA,IAAA/H,EAAAuB,EAAA7D,MAAApB,KAAAoD,EAAAC,aAAArD,YAOY0D,EAAAgI,aAA8C,GAErChI,EAAAiI,OAAmB,CACpCzG,SAASC,QAAQqB,kBACjBtB,SAASC,QAAQyB,sBACjB1B,SAASC,QAAQ2B,sBACjB5B,SAASC,QAAQ6B,WACjB9B,SAASC,QAAQiC,cACjBlC,SAASC,QAAQ8C,0BACjB/C,SAASC,QAAQgD,8BACjBjD,SAASC,QAAQ6D,YACjB9D,SAASC,QAAQiE,wBACjBlE,SAASC,QAAQmE,qBAnBe1J,EAAA6L,EAAAxG,GAsBpBwG,EAAAf,kBAAP,SAAyBC,EAAuBiB,GACrDH,EAAeG,SAAWA,EAC1B3G,EAAMyF,kBAAiB/K,KAAAK,KAACyL,EAAed,cAAec,IAGjDA,EAAAhM,UAAAgE,KAAA,WAAA,IAAAC,EAAA1D,KAUL,OATAA,KAAK2L,OAAO7H,SAAQ,SAAC+H,GACnB,IAAMC,EAAMC,EAAAA,UAAUrI,EAAK0G,OAAQyB,GAAWG,KAAKd,EAAAA,KAAI,SAAAF,GAAQ,OAAAtH,EAAKqH,SAASC,OAC7EtH,EAAKgI,aAAahJ,KAAKoJ,MAGzB9L,KAAKiM,aAAeC,EAAAA,MAAK9K,WAAA,EAAAgC,EAAIpD,KAAK0L,eAE9BD,EAAeU,eAAeC,QAAQC,IAAIZ,EAAed,cAAe,WACxEc,EAAeG,UAAUH,EAAeG,SAAS5L,OAC9C,GAGFyL,EAAAhM,UAAA6M,OAAA,WAKL,OAJAtM,KAAK0L,aAAe,GACpB1L,KAAKiM,kBAAe3B,EAEhBmB,EAAeU,eAAeC,QAAQC,IAAIZ,EAAed,cAAe,cACrE,GAGFc,EAAAhM,UAAA8M,SAAA,WACL,OAAO,GAGFd,EAAAhM,UAAA+M,WAAA,WACL,OAAO,MArDyBrC,IACpBsB,GAAAd,cAAwB,iBACxBc,GAAAU,eAAyB,EAExBV,GAAAG,SAA0C,uBCsFzD,SAAAa,EAAoBpI,GAAArE,KAAAqE,OAAAA,EAjCHrE,KAAA0M,kBAAoB,IAAIC,EAAAA,aACxB3M,KAAA4M,aAAe,IAAID,EAAAA,aACnB3M,KAAA6M,QAAU,IAAIF,EAAAA,aAGd3M,KAAA8M,YAAc,IAAIH,EAAAA,aAClB3M,KAAA+M,aAAe,IAAIJ,EAAAA,aACnB3M,KAAAgN,iBAAmB,IAAIL,EAAAA,aACvB3M,KAAAiN,OAAS,IAAIN,EAAAA,aACb3M,KAAAkN,UAAY,IAAIP,EAAAA,aAChB3M,KAAAmN,oBAAsB,IAAIR,EAAAA,aAC1B3M,KAAAoN,wBAA0B,IAAIT,EAAAA,aAC9B3M,KAAAqN,QAAU,IAAIV,EAAAA,aACd3M,KAAAsN,mBAAqB,IAAIX,EAAAA,aACzB3M,KAAAuN,OAAS,IAAIZ,EAAAA,aAGd3M,KAAAwN,mBAAoB,EAE5BxN,KAAAyN,eAAgC,KAChCzN,KAAA0N,mBAAoB,EAGpB1N,KAAA2N,YAAgC,IAAIC,EAAAA,QAW1C5N,KAAK6N,YAAc7N,KAAK8N,oBALXrB,EAAAsB,UAAP,SAAiBC,GACvB,OAAQA,EAAWC,WAAW,QAAWD,EAAa,OAAOA,GAO/D5O,OAAA8O,eAAoBzB,EAAAhN,UAAA,gBAAa,KAOjC,WACE,OAAOO,KAAKyN,oBARd,SAAkCpD,IAC3BrK,KAAK0N,mBAAqBrD,IAC7BrK,KAAKyN,eAAiBpD,EACjBrK,KAAKmO,qDAQd1B,EAAAhN,UAAA2O,YAAA,WACEpO,KAAKqO,2BAEDrO,KAAKoK,SACPpK,KAAKoK,OAAOkE,WACZtO,KAAKoK,OAAOmE,gBAGdvO,KAAKoK,OAAS,KACdpK,KAAK0N,mBAAoB,EAEzB1N,KAAK2N,YAAY7M,OACjBd,KAAK2N,YAAYa,YAMZ/B,EAAAhN,UAAAgP,wBAAA,SACLC,EACAC,GAEA,MAAO,CACLC,mBAAoB,CAClBC,IAAK,qBACLF,eAAcA,EACdG,IAAK,gBAEPJ,oBAAmBA,IAOvBtP,OAAA8O,eAAWzB,EAAAhN,UAAA,WAAQ,KAAnB,WACE,OAAOO,KAAKoK,wCAMdhL,OAAA8O,eAAWzB,EAAAhN,UAAA,aAAU,KAArB,WACE,OAAOO,KAAKgO,gBAMd,SAAsBpN,GACpBZ,KAAKgO,WAAapN,EAClBZ,KAAK+O,UAAU/O,KAAKgO,6CAMtB5O,OAAA8O,eAAWzB,EAAAhN,UAAA,YAAS,KAApB,WACE,OAAO6E,SAAS0K,eAAehP,KAAK6N,8CAMtCzO,OAAA8O,eAAWzB,EAAAhN,UAAA,cAAW,KAAtB,WACE,OAAOO,KAAK6N,6CAGdzO,OAAA8O,eAAWzB,EAAAhN,UAAA,iBAAc,KAAzB,WACE,OAAOO,KAAKiP,0CAGd7P,OAAA8O,eAAWzB,EAAAhN,UAAA,kBAAe,KAA1B,WACE,GAAIO,KAAKiP,SACP,OAAOjP,KAAKiP,SAAShD,8CAIlBQ,EAAAhN,UAAAyP,iBAAA,SAAiB5K,EACA6K,EACA9E,GACtB,OAAOrK,KAAKoK,OAAO8E,iBAAiB5K,EAAU6K,EAAY9E,IAOpDoC,EAAAhN,UAAA2P,YAAA,WAAA,IAAA1L,EAAA1D,KAEAqP,EAAM,kEADIrP,KAAKsP,cAAcC,SAAW,OACsC,mBACpF,OAAOvP,KAAKqE,OAAOZ,KACjB4L,GAEClO,MAAK,SAACqO,GACL9L,EAAK2I,IAAI,iBAAkBmD,MAE5BC,OAAM,SAAAtM,GAAS,OAAAO,EAAKP,MAAMA,OAMjBsJ,EAAAhN,UAAA0O,iBAAA,gHAEZ,MAAA,CAAA,EAAMnO,KAAKoP,6BAAX7D,EAAA1J,OACI7B,KAAKsP,cAAcI,uBAAuB1P,KAAKsP,cAAcI,wBAI5DxK,SAASC,QAAQwK,QAAQd,IAO5Be,YAAW,WACTlM,EAAKmM,iBAPP3K,SAASC,QAAQ2K,YAAY9P,KAAKsP,cAAcV,oBAAoB,WAClElL,EAAKmM,6BAWHpD,EAAAhN,UAAAoQ,YAAA,mBAkBFR,EAhBEU,EAAU/P,KAAKgQ,yBACfC,EAASjQ,KAAKkQ,wBAAwBH,GAGxC/P,KAAKsP,cAAca,yBACrBF,EAAOG,iBAAmB,CAAEC,IAAK,2BAI/BrQ,KAAKsP,cAAcgB,eACrBtQ,KAAKoK,OAAS,IAAIlF,SAASC,QAAQoL,SAASvQ,KAAKwQ,UAAWP,GAE5DjQ,KAAKoK,OAAS,IAAIlF,SAASC,QAAQsL,YAAYzQ,KAAKwQ,UAAWP,GAKd,WAAV,QAArCS,EAAA1Q,KAAKsP,cAAcV,0BAAkB,IAAA8B,OAAA,EAAAA,EAAE7B,OACzCQ,EAA2C,QAAxChE,EAAGrL,KAAKsP,cAAcV,0BAAkB,IAAAvD,OAAA,EAAAA,EAAE/G,UAG/CtE,KAAKoK,OAAOuG,MAAMtB,GAGlBrP,KAAK0N,mBAAoB,EACzB1N,KAAKsP,cAAcZ,oBAAoB,CAAEkC,gBAAiB5Q,KAAMoK,OAAQpK,KAAKoK,UAMvEqC,EAAAhN,UAAAsP,UAAA,SAAUf,GACXA,GAKL9I,SAASC,QAAQ0L,SAASpN,KAAKgJ,EAAgBsB,UAAUC,GAC1BhO,KAAK8Q,sBAAsBC,KAAK/Q,MAChCA,KAAKgR,sBAAsBD,KAAK/Q,QAMzDyM,EAAAhN,UAAAqR,sBAAA,SAAsBxM,GAC5B,GAAKA,EAAS2M,YAIdjR,KAAK0M,kBAAkBwE,KAAK,CAAE5M,SAAQA,EAAEsM,gBAAiB5Q,KAAMoK,OAAQpK,KAAKoK,cAE/BE,IAAzCtK,KAAKsP,cAAc6B,mBAAmCnR,KAAKsP,cAAc6B,mBAAmB,CAC9F,IAAIC,EAAsC9M,EAAS2M,UAAkBI,qBACrE,IAAKD,EAEHA,EADkB9M,EAAS2M,UAAUK,OAAO,CAAE9M,KAAM,aAClC,GAGfxE,KAAKoK,OAAO8E,iBAAiB5K,EAAU8M,OAAO9G,KAO/CmC,EAAAhN,UAAAuR,sBAAA,SAAsBO,GAC5BvR,KAAKmD,MAAM,uCAAyCoO,GACpDvR,KAAK6M,QAAQqE,KAAKK,IAMZ9E,EAAAhN,UAAAuQ,uBAAA,WAEN,OADAvE,GAAef,kBAAkBe,GAAed,cAAe3K,KAAKwR,gBAAgBT,KAAK/Q,OAClFyL,GAAed,eAOhB8B,EAAAhN,UAAA+R,gBAAA,SAAgBC,GAAhB,IAAA/N,EAAA1D,KACNA,KAAKiP,SAAWwC,EAChBA,EAAIxF,aACDD,KAAK0F,EAAAA,UAAU1R,KAAK2N,cACpBgE,WAAU,SAACC,GACVlO,EAAK2I,IAAIuF,GAELA,aAAgBrL,EAClB7C,EAAKoJ,YAAYoE,KAAKU,GACbA,aAAgBjL,EACzBjD,EAAKqJ,aAAamE,KAAKU,GACdA,aAAgB/K,EACzBnD,EAAKsJ,iBAAiBkE,KAAKU,GAClBA,aAAgB7K,EACzBrD,EAAKuJ,OAAOiE,KAAKU,GACRA,aAAgBzK,EACzBzD,EAAKwJ,UAAUgE,KAAKU,GACXA,aAAgB5J,EACzBtE,EAAKyJ,oBAAoB+D,KAAKU,GACrBA,aAAgB1J,EACzBxE,EAAK0J,wBAAwB8D,KAAKU,GACzBA,aAAgB7I,EACzBrF,EAAK2J,QAAQ6D,KAAKU,GACTA,aAAgBzI,EACzBzF,EAAK4J,mBAAmB4D,KAAKU,GACpBA,aAAgBvI,GACzB3F,EAAK6J,OAAO2D,KAAKU,OAKjBnF,EAAAhN,UAAA4O,yBAAA,WACN5C,GAAeX,oBAAoBW,GAAed,eAClD3K,KAAKiP,SAAW,MAOVxC,EAAAhN,UAAAyQ,wBAAA,SAAwBH,GAC9B,IAAME,EAAwC7Q,OAAOyS,OACnD,GACA7R,KAAKsP,cAAcwC,aACnB,CAAEC,WAAY,KAUhB,OANI/R,KAAKsP,cAAcwC,cAAgB9R,KAAKsP,cAAcwC,aAAaC,WACrE9B,EAAO8B,WAAU3O,EAAOpD,KAAKsP,cAAcwC,aAAaC,WAAU,CAAEhC,IAEpEE,EAAO8B,WAAa,CAAChC,GAGhBE,GAGDxD,EAAAhN,UAAA4M,IAAA,SAAI2F,OAAe,IAAAC,EAAA,GAAArO,EAAA,EAAAA,EAAAP,UAAAZ,OAAAmB,IAAAqO,EAAArO,EAAA,GAAAP,UAAAO,GACpB5D,KAAKwN,mBACVpB,QAAQC,IAAI2F,EAASC,IAGfxF,EAAAhN,UAAA0D,MAAA,SAAM6O,OAAe,IAAAC,EAAA,GAAArO,EAAA,EAAAA,EAAAP,UAAAZ,OAAAmB,IAAAqO,EAAArO,EAAA,GAAAP,UAAAO,GACtB5D,KAAKwN,mBACVpB,QAAQjJ,MAAM6O,EAASC,IAGjBxF,EAAAhN,UAAAqO,WAAA,WACN,IAAMoE,EAAK,WAET,OAA+B,OAArB,EAAIC,KAAKC,UAAuB,GAAGC,SAAS,IAAIC,UAAU,IAItE,MAAO,WADOJ,IAAOA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAOA,IAAOA,gCAlV1FK,EAAAA,UAASvH,KAAA,CAAC,CACTwH,SAAU,oBACVC,SAAA,kEAEAC,gBAAiBC,EAAAA,wBAAwBC,gKAhDlCrP,iDAqDNsP,EAAAA,6BACAA,EAAAA,wBACAA,EAAAA,4BAGAA,EAAAA,6BACAA,EAAAA,iCACAA,EAAAA,uBACAA,EAAAA,0BACAA,EAAAA,oCACAA,EAAAA,wCACAA,EAAAA,wBACAA,EAAAA,mCACAA,EAAAA,uBACAA,EAAAA,kCAGAC,EAAAA,6BAoBAA,EAAAA,2BC5ED,SAAAC,EACUC,EACAC,GADAjT,KAAAgT,KAAAA,EACAhT,KAAAiT,UAAAA,SAGHF,EAAAtT,UAAAyT,YAAA,WACDlT,KAAKmT,mBACPnT,KAAKoT,YAAYpT,KAAKmT,iBAAiBE,iBACvCrT,KAAKsT,aAAatT,KAAKmT,iBAAiBnF,cAIpC+E,EAAAtT,UAAA6T,aAAA,SAAatF,GAAb,IAAAtK,EAAA1D,KACFqP,EAAM,oEAAoErB,EAAU,aAEpFuF,EAAe,GACfvT,KAAKmT,iBAAiBK,QAAOD,GAAQ,SAASvT,KAAKmT,iBAAiBK,MAAK,KACzExT,KAAKmT,iBAAiBM,SAAQF,GAAQ,UAAUvT,KAAKmT,iBAAiBM,OAAM,KAC5EF,IAAMlE,GAAO,IAAIkE,EAAKG,MAAM,GAAI,IAEpC1T,KAAKmT,iBAAiBxE,eAAe3O,KAAK2T,eAAe5C,KAAK/Q,OAC9D,IAAM4T,EAAU,CACdC,cAAe,UAAU7T,KAAK8T,MAC9BC,eAAgB,aAGlB/T,KAAKgT,KAAKgB,IAAI3E,EAAK,CAAEuE,QAAOA,EAAEK,aAAc,gBACzCtC,WACC,SAAAnC,GAAQ,OAAA,EAAS9L,EAAK0P,YAAY,yBAAyB1P,EAAKwQ,SAAS1E,IACrE9L,EAAK0P,iBACT,SAAAjQ,GAAS,OAAAO,EAAK0P,kBAIZL,EAAAtT,UAAAkU,eAAA,SAAeQ,EAAqBC,GAC1CpU,KAAK8T,MAAQK,EACbnU,KAAKqU,OAASD,GAGRrB,EAAAtT,UAAAyU,SAAA,SAAS1E,GACf,OAAO8E,KAAKxU,OAAOyU,aAAYnT,MAAnBtB,OAAMsD,EAAiB,IAAIoR,WAAWhF,OAG5CuD,EAAAtT,UAAA2T,YAAA,SAAYrP,QAAA,IAAAA,IAAAA,EAAA,IAClB,IAAI0Q,EAAW,GAGbA,EADE1Q,IAGU/D,KAAKmT,kBAAoBnT,KAAKmT,iBAAiBE,iBAAoB,IAGjFrT,KAAKyU,SAAWzU,KAAKiT,UAAUyB,uBAAuBD,8BA/DzDlC,EAAAA,UAASvH,KAAA,CAAC,CACTwH,SAAU,uBACVC,SAAA,2EAbOkC,EAAAA,kBACAC,EAAAA,2DAeN9B,EAAAA,gBCHH,kCANC+B,EAAAA,SAAQ7J,KAAA,CAAC,CACR8J,aAAc,CAACrI,GAAiBsG,IAChCgC,QAAS,CAACC,EAAAA,kBACVC,QAAS,CAACxI,GAAiBsG,IAC3BmC,UAAW,CAAC3R","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Injectable } from '@angular/core';\n\ndeclare var document: any;\n\nexport interface ScriptInfoLookup {\n  [key: string]: ScriptInfo;\n}\n\nexport interface ScriptInfo {\n  src: string;\n  loaded: boolean;\n  status?: string;\n}\n\n@Injectable()\nexport class ScriptService {\n\n  private scripts: ScriptInfoLookup = {};\n\n  constructor() {\n    // Nothing to do\n  }\n\n  public load(...urls: string[]): Promise<ScriptInfo[]> {\n    const promises: Promise<ScriptInfo>[] = [];\n\n    urls.forEach((src) => {\n      if (this.scripts[src] && this.scripts[src].loaded) {\n        return;\n      }\n\n      this.scripts[src] = { src, loaded: false };\n      return promises.push(this.loadScript(src));\n    });\n\n    return Promise.all(promises);\n  }\n\n  public loadScript(name: string): Promise<ScriptInfo> {\n    return new Promise((resolve, reject) => {\n      // resolve if already loaded\n      if (this.scripts[name] && this.scripts[name].loaded) {\n        resolve({ src: name, loaded: true, status: 'Already Loaded' });\n        return;\n      }\n\n      // load script\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = this.scripts[name].src;\n\n      if (script.readyState) {  // IE\n        script.onreadystatechange = () => {\n          if (script.readyState === 'loaded' || script.readyState === 'complete') {\n            script.onreadystatechange = null;\n            this.scripts[name].loaded = true;\n\n            resolve({ src: name, loaded: true, status: 'Loaded' });\n          }\n        };\n      } else {  // Others\n        script.onload = () => {\n          this.scripts[name].loaded = true;\n\n          resolve({ src: name, loaded: true, status: 'Loaded' });\n        };\n      }\n\n      script.onerror = (error: any) => resolve({ src: name, loaded: false, status: 'Loaded' });\n      document.getElementsByTagName('head')[0].appendChild(script);\n    });\n  }\n}\n","/// <reference types=\"forge-viewer\" />\nexport abstract class ViewerEventArgs {\n  target?: Autodesk.Viewing.Viewer3D;\n  model?: Autodesk.Viewing.ViewerItem;\n  type: string;\n  [key: string]: any;\n}\nexport class AggregationSelectionChangedEventArgs extends ViewerEventArgs {\n  selections: Autodesk.Viewing.ViewerItem[];\n  type = Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT;\n}\nexport class AnimationReadyEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.ANIMATION_READY_EVENT;\n}\nexport class CameraChangedEventArgs extends ViewerEventArgs {\n  camera: THREE.Camera;\n  type = Autodesk.Viewing.CAMERA_CHANGE_EVENT;\n}\nexport class CutplanesChangedEventArgs extends ViewerEventArgs {\n  cutplanes: Object[];\n  type = Autodesk.Viewing.CUTPLANES_CHANGE_EVENT;\n}\nexport class EscapeEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.ESCAPE_EVENT;\n}\nexport class ExplodeChangedEventArgs extends ViewerEventArgs {\n  scale: number;\n  type = Autodesk.Viewing.EXPLODE_CHANGE_EVENT;\n}\nexport abstract class ExtensionLoadedUnloadedEventArgs extends ViewerEventArgs {\n  extensionId: string;\n}\nexport class ExtensionLoadedEventArgs extends ExtensionLoadedUnloadedEventArgs {\n  type = Autodesk.Viewing.EXTENSION_LOADED_EVENT;\n}\nexport class ExtensionUnloadedEventArgs extends ExtensionLoadedUnloadedEventArgs {\n  type = Autodesk.Viewing.EXTENSION_UNLOADED_EVENT;\n}\nexport class FinalFrameRenderedChangedEventArgs extends ViewerEventArgs {\n  planes: Object[];\n  type = Autodesk.Viewing.FINAL_FRAME_RENDERED_CHANGED_EVENT;\n}\nexport class FitToViewEventArgs extends ViewerEventArgs {\n  immediate: boolean;\n  nodeIdArray: number[];\n  type = Autodesk.Viewing.FIT_TO_VIEW_EVENT;\n}\nexport class FragmentsLoadedEventArgs extends ViewerEventArgs {\n  getFragIds: () => void;\n  data: Object;\n  type = Autodesk.Viewing.FRAGMENTS_LOADED_EVENT;\n}\nexport class FullscreenEventArgs extends ViewerEventArgs {\n  mode: Autodesk.Viewing.ScreenMode;\n  type = Autodesk.Viewing.FULLSCREEN_MODE_EVENT;\n}\nexport class GeometryLoadedEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.GEOMETRY_LOADED_EVENT;\n}\nexport class HideEventArgs extends ViewerEventArgs {\n  nodeIdArray: number[];\n  type = Autodesk.Viewing.HIDE_EVENT;\n}\nexport class HyperlinkEventArgs extends ViewerEventArgs {\n  data: Object; // TODO: Can his be stronger?\n  type = Autodesk.Viewing.HYPERLINK_EVENT;\n}\nexport class IsolateEventArgs extends ViewerEventArgs {\n  nodeIdArray: number[];\n  type = Autodesk.Viewing.ISOLATE_EVENT;\n}\nexport class LayerVisibilityEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT;\n}\nexport class LoadMissingGeometryEventArgs extends ViewerEventArgs {\n  delay: boolean;\n  type = Autodesk.Viewing.LOAD_MISSING_GEOMETRY;\n}\nexport class ModelRootLoadedEventArgs extends ViewerEventArgs {\n  svf: Object; // TODO: can this be stronger\n  type = Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT;\n}\nexport class ModelUnloadedEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.MODEL_UNLOADED_EVENT;\n}\nexport class NavigationModeChangedEventArgs extends ViewerEventArgs {\n  id: string;\n  type = Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT;\n}\nexport abstract class ObjectTreeEventArgs extends ViewerEventArgs {\n  svf: Object; // TODO: can this be stronger\n}\nexport class ObjectTreeCreatedEventArgs extends ObjectTreeEventArgs {\n  type = Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT;\n}\nexport class ObjectTreeUnavailableEventArgs extends ObjectTreeEventArgs {\n  type = Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT;\n}\nexport abstract class PrefEventArgs extends ViewerEventArgs {\n  name: string;\n  value: Object;\n}\nexport class PrefChangedEventArgs extends PrefEventArgs {\n  type = Autodesk.Viewing.PREF_CHANGED_EVENT;\n}\nexport class PrefResetEventArgs extends PrefEventArgs {\n  type = Autodesk.Viewing.PREF_RESET_EVENT;\n}\nexport class ProgressUpdateEventArgs extends ViewerEventArgs {\n  percent: number;\n  state: Autodesk.Viewing.ProgressState;\n  type = Autodesk.Viewing.PROGRESS_UPDATE_EVENT;\n}\nexport class RenderOptionChangedEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT;\n}\nexport class RenderPresentedEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.RENDER_PRESENTED_EVENT;\n}\nexport class ResetEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.RESET_EVENT;\n}\nexport class RestoreDefaultSettingsEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.RESTORE_DEFAULT_SETTINGS_EVENT;\n}\nexport class SelectionChangedEventArgs extends ViewerEventArgs {\n  fragIdsArray: number[];\n  dbIdArray: number[];\n  nodeArray: number[];\n  type = Autodesk.Viewing.SELECTION_CHANGED_EVENT;\n}\nexport class ShowEventArgs extends ViewerEventArgs {\n  nodeArrayId: number[];\n  type = Autodesk.Viewing.SHOW_EVENT;\n}\nexport class TexturesLoadedEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.TEXTURES_LOADED_EVENT;\n}\nexport class ToolChangedEventArgs extends ViewerEventArgs {\n  toolName: string;\n  tool: Object;\n  active: boolean;\n  type = Autodesk.Viewing.TOOL_CHANGE_EVENT;\n}\nexport class ViewerInitializedEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.VIEWER_INITIALIZED;\n}\nexport class ViewerResizeEventArgs extends ViewerEventArgs {\n  width: number;\n  height: number;\n  type = Autodesk.Viewing.VIEWER_RESIZE_EVENT;\n}\nexport class ViewerStateRestoredEventArgs extends ViewerEventArgs {\n  value: boolean;\n  type = Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT;\n}\nexport class ViewerUnInitializedEventArgs extends ViewerEventArgs {\n  type = Autodesk.Viewing.VIEWER_UNINITIALIZED;\n}\n\n/**\n * Base extension that all other extensions can inherit from\n */\nexport abstract class Extension {\n  public static extensionName: string = '';\n\n  protected viewer: Autodesk.Viewing.Viewer3D = undefined;\n  protected extOptions: Autodesk.Viewing.ExtensionOptions = undefined;\n\n  protected eventArgsTypeMap: { [key: string]: Function } = {};\n\n  public static registerExtension(extensionName: string, extension: Object) {\n    Autodesk.Viewing.theExtensionManager.registerExtension(extensionName, extension);\n  }\n\n  public static unregisterExtension(extensionName: string) {\n    Autodesk.Viewing.theExtensionManager.unregisterExtension(extensionName);\n  }\n\n  constructor(viewer: Autodesk.Viewing.Viewer3D,\n              options?: Autodesk.Viewing.ExtensionOptions) {\n    this.viewer = viewer;\n    this.extOptions = options;\n\n    this.registerEventTypes();\n  }\n\n  /** Called by Autodesk extension manager when extension is loaded */\n  public abstract load(): boolean | Promise<boolean>;\n  /** Called by Autodesk extension manager when extension is unloaded */\n  public abstract unload(): boolean;\n  /** Called by Autodesk extension manager when extension is activated - return true */\n  public abstract activate(): boolean;\n  /** Called by Autodesk extension manager when extension is activated - return true */\n  public abstract deactivate(): boolean;\n\n  /** Register event args types that we will cast to 'proper' objects */\n  protected registerEventTypes() {\n    // tslint:disable:max-line-length\n    this.eventArgsTypeMap[Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT] = AggregationSelectionChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.ANIMATION_READY_EVENT] = AnimationReadyEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.CAMERA_CHANGE_EVENT] = CameraChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.CUTPLANES_CHANGE_EVENT] = CutplanesChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.ESCAPE_EVENT] = EscapeEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.EXPLODE_CHANGE_EVENT] = ExplodeChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.EXTENSION_LOADED_EVENT] = ExtensionLoadedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.EXTENSION_UNLOADED_EVENT] = ExtensionUnloadedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.FINAL_FRAME_RENDERED_CHANGED_EVENT] = FinalFrameRenderedChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.FIT_TO_VIEW_EVENT] = FitToViewEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.FRAGMENTS_LOADED_EVENT] = FragmentsLoadedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.FULLSCREEN_MODE_EVENT] = FullscreenEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.GEOMETRY_LOADED_EVENT] = GeometryLoadedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.HIDE_EVENT] = HideEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.HYPERLINK_EVENT] = HyperlinkEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.ISOLATE_EVENT] = IsolateEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT] = LayerVisibilityEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.LOAD_MISSING_GEOMETRY] = LoadMissingGeometryEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT] = ModelRootLoadedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.MODEL_UNLOADED_EVENT] = ModelUnloadedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT] = NavigationModeChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT] = ObjectTreeCreatedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT] = ObjectTreeUnavailableEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.PREF_CHANGED_EVENT] = PrefChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.PREF_RESET_EVENT] = PrefResetEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.PROGRESS_UPDATE_EVENT] = ProgressUpdateEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT] = RenderOptionChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.RENDER_PRESENTED_EVENT] = RenderPresentedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.RESET_EVENT] = ResetEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.RESTORE_DEFAULT_SETTINGS_EVENT] = RestoreDefaultSettingsEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.SELECTION_CHANGED_EVENT] = SelectionChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.SHOW_EVENT] = ShowEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.TEXTURES_LOADED_EVENT] = TexturesLoadedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.TOOL_CHANGE_EVENT] = ToolChangedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_INITIALIZED] = ViewerInitializedEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_RESIZE_EVENT] = ViewerResizeEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT] = ViewerStateRestoredEventArgs;\n    this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_UNINITIALIZED] = ViewerUnInitializedEventArgs;\n    // tslint:enable:max-line-length\n  }\n\n  /** Cast Viewer event args to class */\n  protected castArgs(args: any): any {\n    if (Array.isArray(args)) {\n      return args.map(this.castArgs);\n    }\n\n    if (!args || typeof args !== 'object' || !args.hasOwnProperty('type')) {\n      // Can't cast this object\n      return args;\n    }\n\n    // Create new object of appropriate type\n    const clazz = this.eventArgsTypeMap[args.type];\n    const typedItem = Object.create(clazz.prototype);\n\n    // Cast any properties\n    for (const k of Object.keys(args)) {\n      typedItem[k] = this.castArgs(args[k]);\n    }\n\n    return typedItem;\n  }\n}\n","import { Observable, fromEvent, merge } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { Extension, ViewerEventArgs } from './extension';\n\nexport class BasicExtension extends Extension {\n  public static extensionName: string = 'BasicExtension';\n  public static debugMessages: boolean = false;\n\n  private static callback: (ext: BasicExtension) => void = null;\n\n  public viewerEvents: Observable<ViewerEventArgs>;\n  protected eventStreams: Observable<ViewerEventArgs>[] = [];\n\n  protected readonly events: string[] = [\n    Autodesk.Viewing.FIT_TO_VIEW_EVENT,\n    Autodesk.Viewing.FULLSCREEN_MODE_EVENT,\n    Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\n    Autodesk.Viewing.HIDE_EVENT,\n    Autodesk.Viewing.ISOLATE_EVENT,\n    Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n    Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT,\n    Autodesk.Viewing.RESET_EVENT,\n    Autodesk.Viewing.SELECTION_CHANGED_EVENT,\n    Autodesk.Viewing.SHOW_EVENT,\n  ];\n\n  public static registerExtension(extensionName: string, callback: (ext: BasicExtension) => void) {\n    BasicExtension.callback = callback;\n    super.registerExtension(BasicExtension.extensionName, BasicExtension);\n  }\n\n  public load() {\n    this.events.forEach((eventName) => {\n      const obs = fromEvent(this.viewer, eventName).pipe(map(args => this.castArgs(args)));\n      this.eventStreams.push(obs);\n    });\n\n    this.viewerEvents = merge(...this.eventStreams);\n\n    if (BasicExtension.debugMessages) console.log(BasicExtension.extensionName, 'loaded!');\n    if (BasicExtension.callback) BasicExtension.callback(this);\n    return true;\n  }\n\n  public unload() {\n    this.eventStreams = [];\n    this.viewerEvents = undefined;\n\n    if (BasicExtension.debugMessages) console.log(BasicExtension.extensionName, 'unloaded!');\n    return true;\n  }\n\n  public activate() {\n    return true;\n  }\n\n  public deactivate() {\n    return true;\n  }\n}\n","/// <reference types=\"forge-viewer\" />\nimport { takeUntil } from 'rxjs/operators';\n\ndeclare const Autodesk: any;\n\nimport { ChangeDetectionStrategy, Component, EventEmitter, Input, OnDestroy,\n  Output } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\n\nimport { ScriptService } from '../service/script.service';\nimport {\n  FitToViewEventArgs,\n  FullscreenEventArgs,\n  GeometryLoadedEventArgs,\n  HideEventArgs,\n  IsolateEventArgs,\n  ObjectTreeCreatedEventArgs,\n  ObjectTreeUnavailableEventArgs, ResetEventArgs,\n  SelectionChangedEventArgs,\n  ShowEventArgs,\n  ViewerEventArgs,\n} from '../extensions/extension';\nimport { BasicExtension } from '../extensions/basic-extension';\n\nexport interface DocumentChangedEvent {\n  document: Autodesk.Viewing.Document;\n  viewerComponent: ViewerComponent;\n  viewer: Autodesk.Viewing.Viewer3D;\n}\n\nexport interface ItemLoadedEvent {\n  item: Autodesk.Viewing.ViewerItem;\n  viewer: Autodesk.Viewing.Viewer3D;\n  viewerComponent: ViewerComponent;\n}\n\nexport interface ViewerInitializedEvent {\n  viewerComponent: ViewerComponent;\n  viewer: Autodesk.Viewing.Viewer3D;\n}\n\nexport interface ViewerOptions {\n  initializerOptions: Autodesk.Viewing.InitializerOptions;\n  viewerConfig?: Autodesk.Viewing.ViewerConfig;\n  headlessViewer?: boolean;\n  showFirstViewable?: boolean;\n  enableMemoryManagement?: boolean;\n  onViewerScriptsLoaded?: () => void;\n  onViewerInitialized: (args: ViewerInitializedEvent) => void;\n  version?: string | number;\n}\n\n\n@Component({\n  selector: 'adsk-forge-viewer',\n  templateUrl: './viewer.component.html',\n  styleUrls: ['./viewer.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ViewerComponent implements OnDestroy {\n  public containerId: string;\n\n  @Output() public onDocumentChanged = new EventEmitter<DocumentChangedEvent>();\n  @Output() public onItemLoaded = new EventEmitter<ItemLoadedEvent>();\n  @Output() public onError = new EventEmitter<Autodesk.Viewing.ErrorCodes>();\n\n  // Viewer events\n  @Output() public onFitToView = new EventEmitter<FitToViewEventArgs>();\n  @Output() public onFullscreen = new EventEmitter<FullscreenEventArgs>();\n  @Output() public onGeometryLoaded = new EventEmitter<GeometryLoadedEventArgs>();\n  @Output() public onHide = new EventEmitter<HideEventArgs>();\n  @Output() public onIsolate = new EventEmitter<IsolateEventArgs>();\n  @Output() public onObjectTreeCreated = new EventEmitter<ObjectTreeCreatedEventArgs>();\n  @Output() public onObjectTreeUnavailable = new EventEmitter<ObjectTreeUnavailableEventArgs>();\n  @Output() public onReset = new EventEmitter<ResetEventArgs>();\n  @Output() public onSelectionChanged = new EventEmitter<SelectionChangedEventArgs>();\n  @Output() public onShow = new EventEmitter<ShowEventArgs>();\n\n  // Debugging\n  @Input() public showDebugMessages = false;\n\n  private _viewerOptions: ViewerOptions = null;\n  private viewerInitialized = false;\n  private viewer: Autodesk.Viewing.Viewer3D;\n  private documentId: string;\n  private unsubscribe: Subject<boolean> = new Subject();\n  private basicExt: BasicExtension;\n\n  /**\n   * Helper to allow callers to specify documentId with or without the required urn: prefix\n   */\n  private static verifyUrn(documentId: string): string {\n    return (documentId.startsWith('urn:')) ? documentId : `urn:${documentId}`;\n  }\n\n  constructor(private script: ScriptService) {\n    this.containerId = this.getDivName();\n  }\n\n  @Input() public set viewerOptions(options: ViewerOptions) {\n    if (!this.viewerInitialized && options) {\n      this._viewerOptions = options;\n      void this.initialiseViewer();\n    }\n  }\n\n  public get viewerOptions() {\n    return this._viewerOptions;\n  }\n\n  ngOnDestroy() {\n    this.unregisterBasicExtension();\n\n    if (this.viewer) {\n      this.viewer.tearDown();\n      this.viewer.uninitialize();\n    }\n\n    this.viewer = null;\n    this.viewerInitialized = false;\n\n    this.unsubscribe.next();\n    this.unsubscribe.complete();\n  }\n\n  /**\n   * Helper method to get some default viewer options\n   */\n  public getDefaultViewerOptions(\n    onViewerInitialized: (args: ViewerInitializedEvent) => void,\n    getAccessToken: (onGetAccessToken: (token: string, expire: number) => void) => void,\n  ): ViewerOptions {\n    return {\n      initializerOptions: {\n        env: 'AutodeskProduction',\n        getAccessToken,\n        api: 'derivativeV2',\n      },\n      onViewerInitialized,\n    };\n  }\n\n  /**\n   * Get a reference to the current 3D viewer\n   */\n  public get Viewer3D(): Autodesk.Viewing.Viewer3D {\n    return this.viewer;\n  }\n\n  /**\n   * Get the document urn that has been loaded\n   */\n  public get DocumentId() {\n    return this.documentId;\n  }\n\n  /**\n   * Set the document urn, which triggers the viewer to load the document\n   */\n  public set DocumentId(value: string) {\n    this.documentId = value;\n    this.loadModel(this.documentId);\n  }\n\n  /**\n   * Get the container element\n   */\n  public get Container(): HTMLElement {\n    return document.getElementById(this.containerId);\n  }\n\n  /**\n   * Get the id assigned to the viewer\n   */\n  public get ContainerId() {\n    return this.containerId;\n  }\n\n  public get basicExtension() {\n    return this.basicExt;\n  }\n\n  public get extensionEvents(): Observable<ViewerEventArgs> | null {\n    if (this.basicExt) {\n      return this.basicExt.viewerEvents;\n    }\n  }\n\n  public loadDocumentNode(document: Autodesk.Viewing.Document,\n                          bubbleNode: Autodesk.Viewing.BubbleNode,\n                          options?: object): Promise<Autodesk.Viewing.Model> {\n    return this.viewer.loadDocumentNode(document, bubbleNode, options);\n  }\n\n  /**\n   * We don't bundle Autodesk's scripts with the component, and we don't really want users to have\n   * to add the scripts to their index.html pages. So we'll load them when required.\n   */\n  private loadScripts(): Promise<void> {\n    const version = this.viewerOptions.version || '7.*';\n    const url = `https://developer.api.autodesk.com/modelderivative/v2/viewers/${version}/viewer3D.min.js`;\n    return this.script.load(\n      url,\n    )\n      .then((data) => {\n        this.log('script loaded ', data);\n      })\n      .catch(error => this.error(error));\n  }\n\n  /**\n   * Initialises the viewer\n   */\n  private async initialiseViewer() {\n    // Load scripts first\n    await this.loadScripts();\n    if (this.viewerOptions.onViewerScriptsLoaded) this.viewerOptions.onViewerScriptsLoaded();\n\n    // Check if the viewer has already been initialised - this isn't the nicest, but we've set the env in our\n    // options above so we at least know that it was us who did this!\n    if (!Autodesk.Viewing.Private.env) {\n      Autodesk.Viewing.Initializer(this.viewerOptions.initializerOptions, () => {\n        this.initialized();\n      });\n    } else {\n      // We need to give an initialised viewing application a tick to allow the DOM element\n      // to be established before we re-draw\n      setTimeout(() => {\n        this.initialized();\n      });\n    }\n  }\n\n  private initialized() {\n    // Register an extension to help us raise events\n    const extName = this.registerBasicExtension();\n    const config = this.addBasicExtensionConfig(extName);\n\n    // Support large models\n    if (this.viewerOptions.enableMemoryManagement) {\n      config.loaderExtensions = { svf: 'Autodesk.MemoryLimited' };\n    }\n\n    // Create a new viewer\n    if (this.viewerOptions.headlessViewer) {\n      this.viewer = new Autodesk.Viewing.Viewer3D(this.Container, config);\n    } else {\n      this.viewer = new Autodesk.Viewing.GuiViewer3D(this.Container, config);\n    }\n\n    // set a document url if environment set to Local\n    let url: string;\n    if (this.viewerOptions.initializerOptions?.env === 'Local') {\n      url = this.viewerOptions.initializerOptions?.document;\n    }\n    // Start the viewer\n    this.viewer.start(url);\n\n    // Viewer is ready - scripts are loaded and we've create a new viewing application\n    this.viewerInitialized = true;\n    this.viewerOptions.onViewerInitialized({ viewerComponent: this, viewer: this.viewer });\n  }\n\n  /**\n   * Loads a model in to the viewer via it's urn\n   */\n  private loadModel(documentId: string) {\n    if (!documentId) {\n      return;\n    }\n\n    // Add urn: to the beginning of document id if needed\n    Autodesk.Viewing.Document.load(ViewerComponent.verifyUrn(documentId),\n                                   this.onDocumentLoadSuccess.bind(this),\n                                   this.onDocumentLoadFailure.bind(this));\n  }\n\n  /**\n   * Document successfully loaded\n   */\n  private onDocumentLoadSuccess(document: Autodesk.Viewing.Document) {\n    if (!document.getRoot()) return;\n\n    // Emit an event so the caller can do something\n    // TODO: config option to specify which viewable to display (how?)\n    this.onDocumentChanged.emit({ document, viewerComponent: this, viewer: this.viewer });\n\n    if (this.viewerOptions.showFirstViewable === undefined || this.viewerOptions.showFirstViewable) {\n      let model: Autodesk.Viewing.BubbleNode = (document.getRoot() as any).getDefaultGeometry();\n      if (!model) {\n        const allModels = document.getRoot().search({ type: 'geometry' });\n        model = allModels[0];\n      }\n\n      void this.viewer.loadDocumentNode(document, model, undefined);\n    }\n  }\n\n  /**\n   * Failed to load document\n   */\n  private onDocumentLoadFailure(errorCode: Autodesk.Viewing.ErrorCodes) {\n    this.error('onDocumentLoadFailure() - errorCode:' + errorCode);\n    this.onError.emit(errorCode);\n  }\n\n  /**\n   * Register our BasicExtension with the Forge Viewer\n   */\n  private registerBasicExtension(): string {\n    BasicExtension.registerExtension(BasicExtension.extensionName, this.extensionLoaded.bind(this));\n    return BasicExtension.extensionName;\n  }\n\n  /**\n   * Subscript to BasicExtension events when the extension has been\n   * succesfully loaded by the viewer.\n   */\n  private extensionLoaded(ext: BasicExtension) {\n    this.basicExt = ext;\n    ext.viewerEvents\n      .pipe(takeUntil(this.unsubscribe))\n      .subscribe((item: ViewerEventArgs) => {\n        this.log(item);\n\n        if (item instanceof FitToViewEventArgs) {\n          this.onFitToView.emit(item);\n        } else if (item instanceof FullscreenEventArgs) {\n          this.onFullscreen.emit(item);\n        } else if (item instanceof GeometryLoadedEventArgs) {\n          this.onGeometryLoaded.emit(item);\n        } else if (item instanceof HideEventArgs) {\n          this.onHide.emit(item);\n        } else if (item instanceof IsolateEventArgs) {\n          this.onIsolate.emit(item);\n        } else if (item instanceof ObjectTreeCreatedEventArgs) {\n          this.onObjectTreeCreated.emit(item);\n        } else if (item instanceof ObjectTreeUnavailableEventArgs) {\n          this.onObjectTreeUnavailable.emit(item);\n        } else if (item instanceof ResetEventArgs) {\n          this.onReset.emit(item);\n        } else if (item instanceof SelectionChangedEventArgs) {\n          this.onSelectionChanged.emit(item);\n        } else if (item instanceof ShowEventArgs) {\n          this.onShow.emit(item);\n        }\n      });\n  }\n\n  private unregisterBasicExtension() {\n    BasicExtension.unregisterExtension(BasicExtension.extensionName);\n    this.basicExt = null;\n  }\n\n  /**\n   * Add list of extensions to the viewer config that has been provided\n   * The allows the user to register their own extensions.\n   */\n  private addBasicExtensionConfig(extName: string): Autodesk.Viewing.ViewerConfig {\n    const config: Autodesk.Viewing.ViewerConfig = Object.assign(\n      {},\n      this.viewerOptions.viewerConfig,\n      { extensions: [] },\n    );\n\n    // We will always load our basic extension with any others specified by the caller\n    if (this.viewerOptions.viewerConfig && this.viewerOptions.viewerConfig.extensions) {\n      config.extensions = [...this.viewerOptions.viewerConfig.extensions, extName];\n    } else {\n      config.extensions = [extName];\n    }\n\n    return config;\n  }\n\n  private log(message?: any, ...optionalParams: any[]) {\n    if (!this.showDebugMessages) return;\n    console.log(message, optionalParams);\n  }\n\n  private error(message?: any, ...optionalParams: any[]) {\n    if (!this.showDebugMessages) return;\n    console.error(message, optionalParams);\n  }\n\n  private getDivName() {\n    const S4 = () => {\n      // tslint:disable-next-line:no-bitwise\n      return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    };\n\n    const guid = (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\n    return `viewer_${guid}`;\n  }\n}\n","import { Component, Input, OnChanges } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\n\nexport interface ThumbnailOptions {\n  getAccessToken?: (onGetAccessToken: (token: string, expire: number) => void) => void;\n  documentId: string;\n  width?: 100|200|400;\n  height?: 100|200|400;\n  defaultImageSrc?: string;\n}\n\n@Component({\n  selector: 'adsk-forge-thumbnail',\n  templateUrl: './thumbnail.component.html',\n})\nexport class ThumbnailComponent implements OnChanges {\n  @Input() public thumbnailOptions: ThumbnailOptions;\n  public imageSrc: SafeUrl;\n\n  private token: string;\n  private expire: number;   // tslint:disable-line\n\n  constructor(\n    private http: HttpClient,\n    private sanitizer: DomSanitizer,\n  ) { }\n\n  public ngOnChanges() {\n    if (this.thumbnailOptions) {\n      this.setImageSrc(this.thumbnailOptions.defaultImageSrc);\n      this.getThumbnail(this.thumbnailOptions.documentId);\n    }\n  }\n\n  private getThumbnail(documentId: string) {\n    let url = `https://developer.api.autodesk.com/modelderivative/v2/designdata/${documentId}/thumbnail`;\n\n    let opts: string = '';\n    if (this.thumbnailOptions.width) opts += `width=${this.thumbnailOptions.width}&`;\n    if (this.thumbnailOptions.height) opts += `height=${this.thumbnailOptions.height}&`;\n    if (opts) url += `?${opts.slice(0, -1)}`;\n\n    this.thumbnailOptions.getAccessToken(this.setAccessToken.bind(this));\n    const headers = {\n      Authorization: `Bearer ${this.token}`,\n      'Content-Type': 'image/png',\n    };\n\n    this.http.get(url, { headers, responseType: 'arraybuffer' })\n      .subscribe(\n        data => (data) ? this.setImageSrc(`data:image/png;base64,${this.toBase64(data)}`)\n          : this.setImageSrc(),\n        error => this.setImageSrc(),\n      );\n  }\n\n  private setAccessToken(accessToken: string, expiryTime: number) {\n    this.token = accessToken;\n    this.expire = expiryTime;\n  }\n\n  private toBase64(data: ArrayBuffer) {\n    return btoa(String.fromCharCode(...new Uint8Array(data) as any));\n  }\n\n  private setImageSrc(src: string = '') {\n    let imageSrc = '';\n\n    if (src) {\n      imageSrc = src;\n    } else {\n      imageSrc = (this.thumbnailOptions && this.thumbnailOptions.defaultImageSrc) || '';\n    }\n\n    this.imageSrc = this.sanitizer.bypassSecurityTrustUrl(imageSrc);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { ViewerComponent } from './component/viewer.component';\nimport { ThumbnailComponent } from './component/thumbnail.component';\nimport { ScriptService } from './service/script.service';\n\n\n@NgModule({\n  declarations: [ViewerComponent, ThumbnailComponent],\n  imports: [HttpClientModule],\n  exports: [ViewerComponent, ThumbnailComponent],\n  providers: [ScriptService],\n})\nexport class ViewerModule { }\n"]}