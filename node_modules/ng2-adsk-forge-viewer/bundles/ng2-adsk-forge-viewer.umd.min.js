!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs/operators"),require("rxjs"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ng2-adsk-forge-viewer",["exports","@angular/core","@angular/common/http","rxjs/operators","rxjs","@angular/platform-browser"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ng2-adsk-forge-viewer"]={},e.ng.core,e.ng.common.http,e.rxjs.operators,e.rxjs,e.ng.platformBrowser)}(this,(function(e,t,n,i,r,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{a(i.next(e))}catch(e){o(e)}}function u(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((i=i.apply(e,t||[])).next())}))}function p(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}Object.create;function E(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}Object.create;var d=function(){function e(){this.scripts={}}return e.prototype.load=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[];return t.forEach((function(t){if(!e.scripts[t]||!e.scripts[t].loaded)return e.scripts[t]={src:t,loaded:!1},i.push(e.loadScript(t))})),Promise.all(i)},e.prototype.loadScript=function(e){var t=this;return new Promise((function(n,i){if(t.scripts[e]&&t.scripts[e].loaded)n({src:e,loaded:!0,status:"Already Loaded"});else{var r=document.createElement("script");r.type="text/javascript",r.src=t.scripts[e].src,r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,t.scripts[e].loaded=!0,n({src:e,loaded:!0,status:"Loaded"}))}:r.onload=function(){t.scripts[e].loaded=!0,n({src:e,loaded:!0,status:"Loaded"})},r.onerror=function(t){return n({src:e,loaded:!1,status:"Loaded"})},document.getElementsByTagName("head")[0].appendChild(r)}}))},e}();d.decorators=[{type:t.Injectable}],d.ctorParameters=function(){return[]};var l=function(){},g=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,t}return u(t,e),t}(l),v=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.ANIMATION_READY_EVENT,t}return u(t,e),t}(l),f=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.CAMERA_CHANGE_EVENT,t}return u(t,e),t}(l),A=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.CUTPLANES_CHANGE_EVENT,t}return u(t,e),t}(l),y=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.ESCAPE_EVENT,t}return u(t,e),t}(l),T=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.EXPLODE_CHANGE_EVENT,t}return u(t,e),t}(l),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(l),V=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.EXTENSION_LOADED_EVENT,t}return u(t,e),t}(w),_=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.EXTENSION_UNLOADED_EVENT,t}return u(t,e),t}(w),N=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.FINAL_FRAME_RENDERED_CHANGED_EVENT,t}return u(t,e),t}(l),m=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.FIT_TO_VIEW_EVENT,t}return u(t,e),t}(l),O=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.FRAGMENTS_LOADED_EVENT,t}return u(t,e),t}(l),b=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.FULLSCREEN_MODE_EVENT,t}return u(t,e),t}(l),k=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.GEOMETRY_LOADED_EVENT,t}return u(t,e),t}(l),D=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.HIDE_EVENT,t}return u(t,e),t}(l),I=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.HYPERLINK_EVENT,t}return u(t,e),t}(l),S=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.ISOLATE_EVENT,t}return u(t,e),t}(l),R=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT,t}return u(t,e),t}(l),C=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.LOAD_MISSING_GEOMETRY,t}return u(t,e),t}(l),L=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,t}return u(t,e),t}(l),M=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.MODEL_UNLOADED_EVENT,t}return u(t,e),t}(l),x=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,t}return u(t,e),t}(l),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(l),P=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,t}return u(t,e),t}(G),j=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT,t}return u(t,e),t}(G),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(l),F=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.PREF_CHANGED_EVENT,t}return u(t,e),t}(H),U=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.PREF_RESET_EVENT,t}return u(t,e),t}(H),B=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.PROGRESS_UPDATE_EVENT,t}return u(t,e),t}(l),z=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT,t}return u(t,e),t}(l),W=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.RENDER_PRESENTED_EVENT,t}return u(t,e),t}(l),Y=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.RESET_EVENT,t}return u(t,e),t}(l),X=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.RESTORE_DEFAULT_SETTINGS_EVENT,t}return u(t,e),t}(l),J=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.SELECTION_CHANGED_EVENT,t}return u(t,e),t}(l),Z=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.SHOW_EVENT,t}return u(t,e),t}(l),q=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.TEXTURES_LOADED_EVENT,t}return u(t,e),t}(l),K=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.TOOL_CHANGE_EVENT,t}return u(t,e),t}(l),Q=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.VIEWER_INITIALIZED,t}return u(t,e),t}(l),$=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.VIEWER_RESIZE_EVENT,t}return u(t,e),t}(l),ee=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,t}return u(t,e),t}(l),te=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.type=Autodesk.Viewing.VIEWER_UNINITIALIZED,t}return u(t,e),t}(l),ne=function(){function e(e,t){this.viewer=void 0,this.extOptions=void 0,this.eventArgsTypeMap={},this.viewer=e,this.extOptions=t,this.registerEventTypes()}return e.registerExtension=function(e,t){Autodesk.Viewing.theExtensionManager.registerExtension(e,t)},e.unregisterExtension=function(e){Autodesk.Viewing.theExtensionManager.unregisterExtension(e)},e.prototype.registerEventTypes=function(){this.eventArgsTypeMap[Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT]=g,this.eventArgsTypeMap[Autodesk.Viewing.ANIMATION_READY_EVENT]=v,this.eventArgsTypeMap[Autodesk.Viewing.CAMERA_CHANGE_EVENT]=f,this.eventArgsTypeMap[Autodesk.Viewing.CUTPLANES_CHANGE_EVENT]=A,this.eventArgsTypeMap[Autodesk.Viewing.ESCAPE_EVENT]=y,this.eventArgsTypeMap[Autodesk.Viewing.EXPLODE_CHANGE_EVENT]=T,this.eventArgsTypeMap[Autodesk.Viewing.EXTENSION_LOADED_EVENT]=V,this.eventArgsTypeMap[Autodesk.Viewing.EXTENSION_UNLOADED_EVENT]=_,this.eventArgsTypeMap[Autodesk.Viewing.FINAL_FRAME_RENDERED_CHANGED_EVENT]=N,this.eventArgsTypeMap[Autodesk.Viewing.FIT_TO_VIEW_EVENT]=m,this.eventArgsTypeMap[Autodesk.Viewing.FRAGMENTS_LOADED_EVENT]=O,this.eventArgsTypeMap[Autodesk.Viewing.FULLSCREEN_MODE_EVENT]=b,this.eventArgsTypeMap[Autodesk.Viewing.GEOMETRY_LOADED_EVENT]=k,this.eventArgsTypeMap[Autodesk.Viewing.HIDE_EVENT]=D,this.eventArgsTypeMap[Autodesk.Viewing.HYPERLINK_EVENT]=I,this.eventArgsTypeMap[Autodesk.Viewing.ISOLATE_EVENT]=S,this.eventArgsTypeMap[Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT]=R,this.eventArgsTypeMap[Autodesk.Viewing.LOAD_MISSING_GEOMETRY]=C,this.eventArgsTypeMap[Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT]=L,this.eventArgsTypeMap[Autodesk.Viewing.MODEL_UNLOADED_EVENT]=M,this.eventArgsTypeMap[Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT]=x,this.eventArgsTypeMap[Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT]=P,this.eventArgsTypeMap[Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT]=j,this.eventArgsTypeMap[Autodesk.Viewing.PREF_CHANGED_EVENT]=F,this.eventArgsTypeMap[Autodesk.Viewing.PREF_RESET_EVENT]=U,this.eventArgsTypeMap[Autodesk.Viewing.PROGRESS_UPDATE_EVENT]=B,this.eventArgsTypeMap[Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT]=z,this.eventArgsTypeMap[Autodesk.Viewing.RENDER_PRESENTED_EVENT]=W,this.eventArgsTypeMap[Autodesk.Viewing.RESET_EVENT]=Y,this.eventArgsTypeMap[Autodesk.Viewing.RESTORE_DEFAULT_SETTINGS_EVENT]=X,this.eventArgsTypeMap[Autodesk.Viewing.SELECTION_CHANGED_EVENT]=J,this.eventArgsTypeMap[Autodesk.Viewing.SHOW_EVENT]=Z,this.eventArgsTypeMap[Autodesk.Viewing.TEXTURES_LOADED_EVENT]=q,this.eventArgsTypeMap[Autodesk.Viewing.TOOL_CHANGE_EVENT]=K,this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_INITIALIZED]=Q,this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_RESIZE_EVENT]=$,this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT]=ee,this.eventArgsTypeMap[Autodesk.Viewing.VIEWER_UNINITIALIZED]=te},e.prototype.castArgs=function(e){var t,n;if(Array.isArray(e))return e.map(this.castArgs);if(!e||"object"!=typeof e||!e.hasOwnProperty("type"))return e;var i=this.eventArgsTypeMap[e.type],r=Object.create(i.prototype);try{for(var o=E(Object.keys(e)),s=o.next();!s.done;s=o.next()){var u=s.value;r[u]=this.castArgs(e[u])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e}();ne.extensionName="";var ie=function(e){function t(){var t=e.apply(this,h(arguments))||this;return t.eventStreams=[],t.events=[Autodesk.Viewing.FIT_TO_VIEW_EVENT,Autodesk.Viewing.FULLSCREEN_MODE_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,Autodesk.Viewing.HIDE_EVENT,Autodesk.Viewing.ISOLATE_EVENT,Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.OBJECT_TREE_UNAVAILABLE_EVENT,Autodesk.Viewing.RESET_EVENT,Autodesk.Viewing.SELECTION_CHANGED_EVENT,Autodesk.Viewing.SHOW_EVENT],t}return u(t,e),t.registerExtension=function(n,i){t.callback=i,e.registerExtension.call(this,t.extensionName,t)},t.prototype.load=function(){var e=this;return this.events.forEach((function(t){var n=r.fromEvent(e.viewer,t).pipe(i.map((function(t){return e.castArgs(t)})));e.eventStreams.push(n)})),this.viewerEvents=r.merge.apply(void 0,h(this.eventStreams)),t.debugMessages&&console.log(t.extensionName,"loaded!"),t.callback&&t.callback(this),!0},t.prototype.unload=function(){return this.eventStreams=[],this.viewerEvents=void 0,t.debugMessages&&console.log(t.extensionName,"unloaded!"),!0},t.prototype.activate=function(){return!0},t.prototype.deactivate=function(){return!0},t}(ne);ie.extensionName="BasicExtension",ie.debugMessages=!1,ie.callback=null;var re=function(){function e(e){this.script=e,this.onDocumentChanged=new t.EventEmitter,this.onItemLoaded=new t.EventEmitter,this.onError=new t.EventEmitter,this.onFitToView=new t.EventEmitter,this.onFullscreen=new t.EventEmitter,this.onGeometryLoaded=new t.EventEmitter,this.onHide=new t.EventEmitter,this.onIsolate=new t.EventEmitter,this.onObjectTreeCreated=new t.EventEmitter,this.onObjectTreeUnavailable=new t.EventEmitter,this.onReset=new t.EventEmitter,this.onSelectionChanged=new t.EventEmitter,this.onShow=new t.EventEmitter,this.showDebugMessages=!1,this._viewerOptions=null,this.viewerInitialized=!1,this.unsubscribe=new r.Subject,this.containerId=this.getDivName()}return e.verifyUrn=function(e){return e.startsWith("urn:")?e:"urn:"+e},Object.defineProperty(e.prototype,"viewerOptions",{get:function(){return this._viewerOptions},set:function(e){!this.viewerInitialized&&e&&(this._viewerOptions=e,this.initialiseViewer())},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.unregisterBasicExtension(),this.viewer&&(this.viewer.tearDown(),this.viewer.uninitialize()),this.viewer=null,this.viewerInitialized=!1,this.unsubscribe.next(),this.unsubscribe.complete()},e.prototype.getDefaultViewerOptions=function(e,t){return{initializerOptions:{env:"AutodeskProduction",getAccessToken:t,api:"derivativeV2"},onViewerInitialized:e}},Object.defineProperty(e.prototype,"Viewer3D",{get:function(){return this.viewer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DocumentId",{get:function(){return this.documentId},set:function(e){this.documentId=e,this.loadModel(this.documentId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Container",{get:function(){return document.getElementById(this.containerId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ContainerId",{get:function(){return this.containerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"basicExtension",{get:function(){return this.basicExt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extensionEvents",{get:function(){if(this.basicExt)return this.basicExt.viewerEvents},enumerable:!1,configurable:!0}),e.prototype.loadDocumentNode=function(e,t,n){return this.viewer.loadDocumentNode(e,t,n)},e.prototype.loadScripts=function(){var e=this,t="https://developer.api.autodesk.com/modelderivative/v2/viewers/"+(this.viewerOptions.version||"7.*")+"/viewer3D.min.js";return this.script.load(t).then((function(t){e.log("script loaded ",t)})).catch((function(t){return e.error(t)}))},e.prototype.initialiseViewer=function(){return a(this,void 0,void 0,(function(){var e=this;return p(this,(function(t){switch(t.label){case 0:return[4,this.loadScripts()];case 1:return t.sent(),this.viewerOptions.onViewerScriptsLoaded&&this.viewerOptions.onViewerScriptsLoaded(),Autodesk.Viewing.Private.env?setTimeout((function(){e.initialized()})):Autodesk.Viewing.Initializer(this.viewerOptions.initializerOptions,(function(){e.initialized()})),[2]}}))}))},e.prototype.initialized=function(){var e,t,n,i=this.registerBasicExtension(),r=this.addBasicExtensionConfig(i);this.viewerOptions.enableMemoryManagement&&(r.loaderExtensions={svf:"Autodesk.MemoryLimited"}),this.viewerOptions.headlessViewer?this.viewer=new Autodesk.Viewing.Viewer3D(this.Container,r):this.viewer=new Autodesk.Viewing.GuiViewer3D(this.Container,r),"Local"===(null===(e=this.viewerOptions.initializerOptions)||void 0===e?void 0:e.env)&&(n=null===(t=this.viewerOptions.initializerOptions)||void 0===t?void 0:t.document),this.viewer.start(n),this.viewerInitialized=!0,this.viewerOptions.onViewerInitialized({viewerComponent:this,viewer:this.viewer})},e.prototype.loadModel=function(t){t&&Autodesk.Viewing.Document.load(e.verifyUrn(t),this.onDocumentLoadSuccess.bind(this),this.onDocumentLoadFailure.bind(this))},e.prototype.onDocumentLoadSuccess=function(e){if(e.getRoot()&&(this.onDocumentChanged.emit({document:e,viewerComponent:this,viewer:this.viewer}),void 0===this.viewerOptions.showFirstViewable||this.viewerOptions.showFirstViewable)){var t=e.getRoot().getDefaultGeometry();if(!t)t=e.getRoot().search({type:"geometry"})[0];this.viewer.loadDocumentNode(e,t,void 0)}},e.prototype.onDocumentLoadFailure=function(e){this.error("onDocumentLoadFailure() - errorCode:"+e),this.onError.emit(e)},e.prototype.registerBasicExtension=function(){return ie.registerExtension(ie.extensionName,this.extensionLoaded.bind(this)),ie.extensionName},e.prototype.extensionLoaded=function(e){var t=this;this.basicExt=e,e.viewerEvents.pipe(i.takeUntil(this.unsubscribe)).subscribe((function(e){t.log(e),e instanceof m?t.onFitToView.emit(e):e instanceof b?t.onFullscreen.emit(e):e instanceof k?t.onGeometryLoaded.emit(e):e instanceof D?t.onHide.emit(e):e instanceof S?t.onIsolate.emit(e):e instanceof P?t.onObjectTreeCreated.emit(e):e instanceof j?t.onObjectTreeUnavailable.emit(e):e instanceof Y?t.onReset.emit(e):e instanceof J?t.onSelectionChanged.emit(e):e instanceof Z&&t.onShow.emit(e)}))},e.prototype.unregisterBasicExtension=function(){ie.unregisterExtension(ie.extensionName),this.basicExt=null},e.prototype.addBasicExtensionConfig=function(e){var t=Object.assign({},this.viewerOptions.viewerConfig,{extensions:[]});return this.viewerOptions.viewerConfig&&this.viewerOptions.viewerConfig.extensions?t.extensions=h(this.viewerOptions.viewerConfig.extensions,[e]):t.extensions=[e],t},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.showDebugMessages&&console.log(e,t)},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.showDebugMessages&&console.error(e,t)},e.prototype.getDivName=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"viewer_"+(e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e())},e}();re.decorators=[{type:t.Component,args:[{selector:"adsk-forge-viewer",template:'<div [id]="containerId" class="forge-viewer-container"></div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:['@import url("https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/style.min.css");']}]}],re.ctorParameters=function(){return[{type:d}]},re.propDecorators={onDocumentChanged:[{type:t.Output}],onItemLoaded:[{type:t.Output}],onError:[{type:t.Output}],onFitToView:[{type:t.Output}],onFullscreen:[{type:t.Output}],onGeometryLoaded:[{type:t.Output}],onHide:[{type:t.Output}],onIsolate:[{type:t.Output}],onObjectTreeCreated:[{type:t.Output}],onObjectTreeUnavailable:[{type:t.Output}],onReset:[{type:t.Output}],onSelectionChanged:[{type:t.Output}],onShow:[{type:t.Output}],showDebugMessages:[{type:t.Input}],viewerOptions:[{type:t.Input}]};var oe=function(){function e(e,t){this.http=e,this.sanitizer=t}return e.prototype.ngOnChanges=function(){this.thumbnailOptions&&(this.setImageSrc(this.thumbnailOptions.defaultImageSrc),this.getThumbnail(this.thumbnailOptions.documentId))},e.prototype.getThumbnail=function(e){var t=this,n="https://developer.api.autodesk.com/modelderivative/v2/designdata/"+e+"/thumbnail",i="";this.thumbnailOptions.width&&(i+="width="+this.thumbnailOptions.width+"&"),this.thumbnailOptions.height&&(i+="height="+this.thumbnailOptions.height+"&"),i&&(n+="?"+i.slice(0,-1)),this.thumbnailOptions.getAccessToken(this.setAccessToken.bind(this));var r={Authorization:"Bearer "+this.token,"Content-Type":"image/png"};this.http.get(n,{headers:r,responseType:"arraybuffer"}).subscribe((function(e){return e?t.setImageSrc("data:image/png;base64,"+t.toBase64(e)):t.setImageSrc()}),(function(e){return t.setImageSrc()}))},e.prototype.setAccessToken=function(e,t){this.token=e,this.expire=t},e.prototype.toBase64=function(e){return btoa(String.fromCharCode.apply(String,h(new Uint8Array(e))))},e.prototype.setImageSrc=function(e){void 0===e&&(e="");var t="";t=e||(this.thumbnailOptions&&this.thumbnailOptions.defaultImageSrc||""),this.imageSrc=this.sanitizer.bypassSecurityTrustUrl(t)},e}();oe.decorators=[{type:t.Component,args:[{selector:"adsk-forge-thumbnail",template:'<img [src]="imageSrc" />\n'}]}],oe.ctorParameters=function(){return[{type:n.HttpClient},{type:o.DomSanitizer}]},oe.propDecorators={thumbnailOptions:[{type:t.Input}]};var se=function(){};se.decorators=[{type:t.NgModule,args:[{declarations:[re,oe],imports:[n.HttpClientModule],exports:[re,oe],providers:[d]}]}],e.AggregationSelectionChangedEventArgs=g,e.AnimationReadyEventArgs=v,e.BasicExtension=ie,e.CameraChangedEventArgs=f,e.CutplanesChangedEventArgs=A,e.EscapeEventArgs=y,e.ExplodeChangedEventArgs=T,e.Extension=ne,e.ExtensionLoadedEventArgs=V,e.ExtensionLoadedUnloadedEventArgs=w,e.ExtensionUnloadedEventArgs=_,e.FinalFrameRenderedChangedEventArgs=N,e.FitToViewEventArgs=m,e.FragmentsLoadedEventArgs=O,e.FullscreenEventArgs=b,e.GeometryLoadedEventArgs=k,e.HideEventArgs=D,e.HyperlinkEventArgs=I,e.IsolateEventArgs=S,e.LayerVisibilityEventArgs=R,e.LoadMissingGeometryEventArgs=C,e.ModelRootLoadedEventArgs=L,e.ModelUnloadedEventArgs=M,e.NavigationModeChangedEventArgs=x,e.ObjectTreeCreatedEventArgs=P,e.ObjectTreeEventArgs=G,e.ObjectTreeUnavailableEventArgs=j,e.PrefChangedEventArgs=F,e.PrefEventArgs=H,e.PrefResetEventArgs=U,e.ProgressUpdateEventArgs=B,e.RenderOptionChangedEventArgs=z,e.RenderPresentedEventArgs=W,e.ResetEventArgs=Y,e.RestoreDefaultSettingsEventArgs=X,e.ScriptService=d,e.SelectionChangedEventArgs=J,e.ShowEventArgs=Z,e.TexturesLoadedEventArgs=q,e.ThumbnailComponent=oe,e.ToolChangedEventArgs=K,e.ViewerComponent=re,e.ViewerEventArgs=l,e.ViewerInitializedEventArgs=Q,e.ViewerModule=se,e.ViewerResizeEventArgs=$,e.ViewerStateRestoredEventArgs=ee,e.ViewerUnInitializedEventArgs=te,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng2-adsk-forge-viewer.umd.min.js.map