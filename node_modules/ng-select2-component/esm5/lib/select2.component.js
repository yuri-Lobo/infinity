/**
 * @fileoverview added by tsickle
 * Generated from: lib/select2.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Attribute, ChangeDetectorRef, Component, ElementRef, EventEmitter, HostBinding, Input, Optional, Output, QueryList, Self, TemplateRef, ViewChild, ViewChildren } from '@angular/core';
import { FormGroupDirective, NgControl, NgForm } from '@angular/forms';
import { Subject } from 'rxjs';
import { Select2Utils, timeout } from './select2-utils';
/** @type {?} */
var nextUniqueId = 0;
/** @type {?} */
var displaySearchStatusList = ['default', 'hidden', 'always'];
var Select2 = /** @class */ (function () {
    function Select2(_changeDetectorRef, _parentForm, _parentFormGroup, _control, tabIndex) {
        this._changeDetectorRef = _changeDetectorRef;
        this._parentForm = _parentForm;
        this._parentFormGroup = _parentFormGroup;
        this._control = _control;
        this.minCharForSearch = 0;
        this.limitSelection = 0;
        /**
         * infinite scroll distance
         */
        this.infiniteScrollDistance = 1.5;
        /**
         * infinite scroll distance
         */
        this.infiniteScrollThrottle = 150;
        /**
         * the max height of the results container when opening the select
         */
        this.resultMaxHeight = '200px';
        this.update = new EventEmitter();
        this.open = new EventEmitter();
        this.close = new EventEmitter();
        this.focus = new EventEmitter();
        this.blur = new EventEmitter();
        this.search = new EventEmitter();
        this.scroll = new EventEmitter();
        this.removeOption = new EventEmitter();
        this.option = null;
        this.isOpen = false;
        /**
         * Whether the element is focused or not.
         */
        this.focused = false;
        this.hoveringValue = null;
        this.innerSearchText = '';
        this._stateChanges = new Subject();
        this._disabled = false;
        this._required = false;
        this._readonly = false;
        this._multiple = false;
        this._material = false;
        this._noStyle = false;
        this._resettable = false;
        this._hideSelectedItems = false;
        this._clickDetection = false;
        this._uid = "select2-" + nextUniqueId++;
        this._infiniteScroll = true;
        /**
         * View -> model callback called when select has been touched
         */
        this._onTouched = (/**
         * @return {?}
         */
        function () {
            // do nothing
        });
        /**
         * View -> model callback called when value changes
         */
        this._onChange = (/**
         * @return {?}
         */
        function () {
            // do nothing
        });
        this.id = this.id;
        this._tabIndex = parseInt(tabIndex, 10) || 0;
        if (this._control) {
            this._control.valueAccessor = this;
        }
        this._clickDetectionFc = this.clickDetection.bind(this);
    }
    Object.defineProperty(Select2.prototype, "multiple", {
        get: /**
         * @return {?}
         */
        function () { return this._multiple; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._multiple = this._coerceBooleanProperty(value); this.ngOnInit(); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "material", {
        /** use the material style */
        get: /**
         * use the material style
         * @return {?}
         */
        function () { return this._material; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._material = this._coerceBooleanProperty(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "noStyle", {
        /** use no style */
        get: /**
         * use no style
         * @return {?}
         */
        function () { return this._noStyle; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._noStyle = this._coerceBooleanProperty(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "infiniteScroll", {
        /** infinite scroll activated */
        get: /**
         * infinite scroll activated
         * @return {?}
         */
        function () { return this._infiniteScroll; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._infiniteScroll = this._coerceBooleanProperty(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "select2Options", {
        get: /**
         * @return {?}
         */
        function () {
            return this.multiple ? (/** @type {?} */ (this.option)) : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "select2Option", {
        get: /**
         * @return {?}
         */
        function () {
            return this.multiple ? null : (/** @type {?} */ (this.option));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "searchText", {
        get: /**
         * @return {?}
         */
        function () {
            return this.innerSearchText;
        },
        set: /**
         * @param {?} text
         * @return {?}
         */
        function (text) {
            if (this.customSearchEnabled) {
                this.search.emit({
                    component: this,
                    value: this._value,
                    search: text
                });
            }
            this.innerSearchText = text;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "minCountForSearch", {
        /** minimal data of show the search field */
        get: /**
         * minimal data of show the search field
         * @return {?}
         */
        function () {
            return this._minCountForSearch;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._minCountForSearch = value;
            this.updateSearchBox();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "id", {
        /** Unique id of the element. */
        get: /**
         * Unique id of the element.
         * @return {?}
         */
        function () { return this._id; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._id = value || this._uid; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "required", {
        /** Whether the element is required. */
        get: /**
         * Whether the element is required.
         * @return {?}
         */
        function () { return this._required; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._required = this._coerceBooleanProperty(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "disabled", {
        /** Whether selected items should be hidden. */
        get: /**
         * Whether selected items should be hidden.
         * @return {?}
         */
        function () { return this._control ? this._control.disabled : this._disabled; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._disabled = this._coerceBooleanProperty(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "hideSelectedItems", {
        /** Whether items are hidden when has. */
        get: /**
         * Whether items are hidden when has.
         * @return {?}
         */
        function () { return this._hideSelectedItems; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._hideSelectedItems = this._coerceBooleanProperty(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "readonly", {
        /** Whether the element is readonly. */
        get: /**
         * Whether the element is readonly.
         * @return {?}
         */
        function () { return this._readonly; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._readonly = this._coerceBooleanProperty(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "value", {
        /** The input element's value. */
        get: /**
         * The input element's value.
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            var _this = this;
            if (this.testValueChange(this._value, value)) {
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this._value = value;
                    _this.writeValue(value);
                }), 10);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "tabIndex", {
        /** Tab index for the select2 element. */
        get: /**
         * Tab index for the select2 element.
         * @return {?}
         */
        function () {
            return this.disabled ? -1 : this._tabIndex;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (typeof value !== 'undefined') {
                this._tabIndex = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "resettable", {
        /** reset with no selected value */
        get: /**
         * reset with no selected value
         * @return {?}
         */
        function () { return this._resettable; },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) { this._resettable = this._coerceBooleanProperty(value); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "ariaInvalid", {
        get: /**
         * @return {?}
         */
        function () {
            return this._isErrorState();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "classMaterial", {
        get: /**
         * @return {?}
         */
        function () {
            return this.material === '' || this.material === true || this.material === 'true';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "classNostyle", {
        get: /**
         * @return {?}
         */
        function () {
            return this.noStyle === '' || this.noStyle === true || this.noStyle === 'true';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Select2.prototype, "select2above", {
        get: /**
         * @return {?}
         */
        function () {
            return this.listPosition === 'above';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    Select2.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var option = Select2Utils.getOptionsByValue(this.data, this._control ? this._control.value : this.value, this.multiple);
        if (option !== null) {
            this.option = option;
        }
        if (!Array.isArray(option)) {
            this.hoveringValue = (/** @type {?} */ (this.value));
        }
        this.updateSearchBox();
    };
    /**
     * @return {?}
     */
    Select2.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.selectionElement = (/** @type {?} */ (this.selection.nativeElement));
        this.searchInputElement = (/** @type {?} */ (this.searchInput.nativeElement));
        this.resultsElement = (/** @type {?} */ (this.resultContainer.nativeElement));
    };
    /**
     * @return {?}
     */
    Select2.prototype.ngDoCheck = /**
     * @return {?}
     */
    function () {
        this.updateSearchBox();
        this._dirtyCheckNativeValue();
    };
    /**
     * @return {?}
     */
    Select2.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        window.document.body.removeEventListener('click', this._clickDetectionFc);
    };
    /**
     * @return {?}
     */
    Select2.prototype.updateSearchBox = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var hidden = this.customSearchEnabled
            ? false
            : Select2Utils.isSearchboxHiddex(this.data, this._minCountForSearch);
        if (this.isSearchboxHidden !== hidden) {
            this.isSearchboxHidden = hidden;
        }
    };
    /**
     * @return {?}
     */
    Select2.prototype.hideSearch = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var displaySearchStatus = displaySearchStatusList.indexOf(this.displaySearchStatus) > -1
            ? this.displaySearchStatus
            : 'default';
        return (displaySearchStatus === 'default' && this.isSearchboxHidden) || displaySearchStatus === 'hidden';
    };
    /**
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.getOptionStyle = /**
     * @param {?} option
     * @return {?}
     */
    function (option) {
        return 'select2-results__option ' +
            (option.hide ? 'select2-results__option--hide ' : '') +
            (option.value === this.hoveringValue ? 'select2-results__option--highlighted ' : '') +
            (option.classes || '');
    };
    /**
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.mouseenter = /**
     * @param {?} option
     * @return {?}
     */
    function (option) {
        if (!option.disabled) {
            this.hoveringValue = option.value;
        }
    };
    /**
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.click = /**
     * @param {?} option
     * @return {?}
     */
    function (option) {
        if (this.testSelection(option)) {
            this.select(option);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    Select2.prototype.reset = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.select(null);
        e.preventDefault();
        e.stopPropagation();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    Select2.prototype.prevChange = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.stopPropagation();
    };
    /**
     * @return {?}
     */
    Select2.prototype.toggleOpenAndClose = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.disabled) {
            return;
        }
        this._focus(true);
        this.isOpen = !this.isOpen;
        if (this.isOpen) {
            this.innerSearchText = '';
            this.updateFilteredData();
            this._focusSearchboxOrResultsElement();
            setTimeout((/**
             * @return {?}
             */
            function () {
                if (_this.option) {
                    /** @type {?} */
                    var option = _this.option instanceof Array ? _this.option[0] : _this.option;
                    _this.updateScrollFromOption(option);
                }
                else {
                    _this.resultsElement.scrollTop = 0;
                }
            }));
            this.open.emit(this);
        }
        else {
            this.close.emit(this);
        }
        if (this.isOpen && !this._clickDetection) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                window.document.body.addEventListener('click', _this._clickDetectionFc, false);
                _this._clickDetection = true;
            }), timeout);
        }
        this._changeDetectorRef.markForCheck();
    };
    /**
     * @param {?} option
     * @param {?} defaut
     * @return {?}
     */
    Select2.prototype.hasTemplate = /**
     * @param {?} option
     * @param {?} defaut
     * @return {?}
     */
    function (option, defaut) {
        return this.templates instanceof TemplateRef
            || this.templates && this.templates[option.templateId] instanceof TemplateRef
            || this.templates && this.templates[defaut] instanceof TemplateRef;
    };
    /**
     * @param {?} option
     * @param {?} defaut
     * @return {?}
     */
    Select2.prototype.getTemplate = /**
     * @param {?} option
     * @param {?} defaut
     * @return {?}
     */
    function (option, defaut) {
        if (this.hasTemplate(option, defaut)) {
            return this.templates[option.templateId]
                || this.templates[defaut]
                || this.templates;
        }
        return undefined;
    };
    /**
     * @private
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.testSelection = /**
     * @private
     * @param {?} option
     * @return {?}
     */
    function (option) {
        if (option.disabled) {
            return false;
        }
        if (!this.multiple ||
            !this.limitSelection ||
            Array.isArray(this._value) && this._value.length < this.limitSelection) {
            return true;
        }
        return false;
    };
    /**
     * @private
     * @param {?} value1
     * @param {?} value2
     * @return {?}
     */
    Select2.prototype.testValueChange = /**
     * @private
     * @param {?} value1
     * @param {?} value2
     * @return {?}
     */
    function (value1, value2) {
        var e_1, _a;
        if ((value1 === null || value1 === undefined) && (value2 === null || value2 === undefined) ||
            value1 === value2) {
            return false;
        }
        if (this.multiple
            && value1 && ((/** @type {?} */ (value1))).length
            && value2 && ((/** @type {?} */ (value2))).length
            && ((/** @type {?} */ (value1))).length === ((/** @type {?} */ (value2))).length) {
            try {
                for (var _b = tslib_1.__values(((/** @type {?} */ (value1)))), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var e1 = _c.value;
                    /** @type {?} */
                    var test = ((/** @type {?} */ (value2))).indexOf(e1) > -1;
                    if (!test) {
                        return true;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return false;
        }
        return true;
    };
    /**
     * @private
     * @return {?}
     */
    Select2.prototype.updateFilteredData = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var result = _this.data;
            if (_this.multiple && _this.hideSelectedItems) {
                result = Select2Utils.getFilteredSelectedData(result, _this.option);
            }
            if (!_this.customSearchEnabled && _this.searchText && _this.searchText.length >= +_this.minCharForSearch) {
                result = Select2Utils.getFilteredData(result, _this.searchText, _this.editPattern);
            }
            if (Select2Utils.valueIsNotInFilteredData(result, _this.hoveringValue)) {
                _this.hoveringValue = Select2Utils.getFirstAvailableOption(result);
            }
            _this.filteredData = result;
            _this._changeDetectorRef.markForCheck();
        }));
    };
    /**
     * @private
     * @param {?} e
     * @return {?}
     */
    Select2.prototype.clickDetection = /**
     * @private
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (!this.ifParentContainsClass((/** @type {?} */ (e.target)), 'selection')) {
            if (this.isOpen && !this.ifParentContainsClass((/** @type {?} */ (e.target)), 'select2-dropdown')) {
                this.toggleOpenAndClose();
            }
            if (!this.ifParentContainsId((/** @type {?} */ (e.target)), this._id)) {
                this.clickExit();
            }
        }
        else if (this.isOpen && !this.ifParentContainsId((/** @type {?} */ (e.target)), this._id)) {
            this.toggleOpenAndClose();
            this.clickExit();
        }
    };
    /**
     * @private
     * @return {?}
     */
    Select2.prototype.clickExit = /**
     * @private
     * @return {?}
     */
    function () {
        this._focus(false);
        window.document.body.removeEventListener('click', this._clickDetectionFc);
        this._clickDetection = false;
    };
    /**
     * @private
     * @param {?} element
     * @param {?} cssClass
     * @return {?}
     */
    Select2.prototype.ifParentContainsClass = /**
     * @private
     * @param {?} element
     * @param {?} cssClass
     * @return {?}
     */
    function (element, cssClass) {
        return this.getParentElementByClass(element, cssClass) !== null;
    };
    /**
     * @private
     * @param {?} element
     * @param {?} id
     * @return {?}
     */
    Select2.prototype.ifParentContainsId = /**
     * @private
     * @param {?} element
     * @param {?} id
     * @return {?}
     */
    function (element, id) {
        return this.getParentElementById(element, id) !== null;
    };
    /**
     * @private
     * @param {?} element
     * @param {?} cssClass
     * @return {?}
     */
    Select2.prototype.getParentElementByClass = /**
     * @private
     * @param {?} element
     * @param {?} cssClass
     * @return {?}
     */
    function (element, cssClass) {
        if (this.containClasses(element, cssClass.trim().split(/\s+/))) {
            return element;
        }
        return element.parentElement
            ? this.getParentElementByClass(element.parentElement, cssClass)
            : null;
    };
    /**
     * @private
     * @param {?} element
     * @param {?} id
     * @return {?}
     */
    Select2.prototype.getParentElementById = /**
     * @private
     * @param {?} element
     * @param {?} id
     * @return {?}
     */
    function (element, id) {
        if (element.id === id) {
            return element;
        }
        return element.parentElement
            ? this.getParentElementById(element.parentElement, id)
            : null;
    };
    /**
     * @private
     * @param {?} element
     * @param {?} cssClasses
     * @return {?}
     */
    Select2.prototype.containClasses = /**
     * @private
     * @param {?} element
     * @param {?} cssClasses
     * @return {?}
     */
    function (element, cssClasses) {
        var e_2, _a;
        if (!element.classList) {
            return false;
        }
        try {
            for (var cssClasses_1 = tslib_1.__values(cssClasses), cssClasses_1_1 = cssClasses_1.next(); !cssClasses_1_1.done; cssClasses_1_1 = cssClasses_1.next()) {
                var cssClass = cssClasses_1_1.value;
                if (!element.classList.contains(cssClass)) {
                    return false;
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (cssClasses_1_1 && !cssClasses_1_1.done && (_a = cssClasses_1.return)) _a.call(cssClasses_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return true;
    };
    /**
     * @return {?}
     */
    Select2.prototype.focusin = /**
     * @return {?}
     */
    function () {
        if (this.disabled) {
            return;
        }
        this._focus(true);
    };
    /**
     * @return {?}
     */
    Select2.prototype.focusout = /**
     * @return {?}
     */
    function () {
        if (this.selectionElement && !this.selectionElement.classList.contains('select2-focused')) {
            this._focus(false);
            this._onTouched();
        }
    };
    /**
     * @private
     * @return {?}
     */
    Select2.prototype.moveUp = /**
     * @private
     * @return {?}
     */
    function () {
        this.updateScrollFromOption(Select2Utils.getPreviousOption(this.filteredData, this.hoveringValue));
    };
    /**
     * @private
     * @return {?}
     */
    Select2.prototype.moveDown = /**
     * @private
     * @return {?}
     */
    function () {
        this.updateScrollFromOption(Select2Utils.getNextOption(this.filteredData, this.hoveringValue));
    };
    /**
     * @private
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.updateScrollFromOption = /**
     * @private
     * @param {?} option
     * @return {?}
     */
    function (option) {
        if (option) {
            this.hoveringValue = option.value;
            /** @type {?} */
            var domElement = this.results.find((/**
             * @param {?} r
             * @return {?}
             */
            function (r) { return r.nativeElement.innerText.trim() === option.label; }));
            if (domElement) {
                this.resultsElement.scrollTop = 0;
                /** @type {?} */
                var listClientRect = this.resultsElement.getBoundingClientRect();
                /** @type {?} */
                var optionClientRect = domElement.nativeElement.getBoundingClientRect();
                this.resultsElement.scrollTop = optionClientRect.top - listClientRect.top;
            }
        }
    };
    /**
     * @private
     * @return {?}
     */
    Select2.prototype.selectByEnter = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.hoveringValue) {
            /** @type {?} */
            var option = Select2Utils.getOptionByValue(this.data, this.hoveringValue);
            this.select(option);
        }
    };
    /**
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.select = /**
     * @param {?} option
     * @return {?}
     */
    function (option) {
        /** @type {?} */
        var value;
        if (option !== null) {
            if (this.multiple) {
                /** @type {?} */
                var options = (/** @type {?} */ (this.option));
                /** @type {?} */
                var index = options.findIndex((/**
                 * @param {?} op
                 * @return {?}
                 */
                function (op) { return op.value === option.value; }));
                if (index === -1) {
                    options.push(option);
                }
                else {
                    options.splice(index, 1);
                }
                value = ((/** @type {?} */ (this.option))).map((/**
                 * @param {?} op
                 * @return {?}
                 */
                function (op) { return op.value; }));
            }
            else {
                this.option = option;
                if (this.isOpen) {
                    this.isOpen = false;
                    this.close.emit(this);
                    if (this.selectionElement) {
                        this.selectionElement.focus();
                    }
                }
                value = this.option.value;
            }
        }
        else {
            this.option = null;
        }
        if (this.multiple && this.hideSelectedItems) {
            this.updateFilteredData();
        }
        if (this._control) {
            this._onChange(value);
        }
        else {
            this._value = value;
        }
        this.update.emit({
            component: this,
            value: value,
            options: Array.isArray(this.option) ? this.option : (this.option ? [this.option] : null)
        });
    };
    /**
     * @param {?} e
     * @return {?}
     */
    Select2.prototype.keyDown = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this._testKey(e, ['ArrowDown', 40])) {
            this.moveDown();
            e.preventDefault();
        }
        else if (this._testKey(e, ['ArrowUp', 38])) {
            this.moveUp();
            e.preventDefault();
        }
        else if (this._testKey(e, ['Enter', 13])) {
            this.selectByEnter();
            e.preventDefault();
        }
        else if (this._testKey(e, ['Escape', 'Tab', 9, 27]) && this.isOpen) {
            this.toggleOpenAndClose();
            this._focus(false);
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    Select2.prototype.openKey = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this._testKey(e, ['ArrowDown', 'ArrowUp', 'Enter', 40, 38, 13])) {
            this.toggleOpenAndClose();
            e.preventDefault();
        }
        else if (this._testKey(e, ['Escape', 'Tab', 9, 27])) {
            this._focus(false);
            this._onTouched();
        }
    };
    /**
     * @param {?} _index
     * @param {?} item
     * @return {?}
     */
    Select2.prototype.trackBy = /**
     * @param {?} _index
     * @param {?} item
     * @return {?}
     */
    function (_index, item) {
        return item.value;
    };
    /**
     * @param {?} e
     * @return {?}
     */
    Select2.prototype.searchUpdate = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.searchText = ((/** @type {?} */ (e.target))).value;
        this.updateFilteredData();
    };
    /**
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.isSelected = /**
     * @param {?} option
     * @return {?}
     */
    function (option) {
        return Select2Utils.isSelected(this.option, option, this.multiple);
    };
    /**
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.isDisabled = /**
     * @param {?} option
     * @return {?}
     */
    function (option) {
        return option.disabled ? 'true' : 'false';
    };
    /**
     * @param {?} e
     * @param {?} option
     * @return {?}
     */
    Select2.prototype.removeSelection = /**
     * @param {?} e
     * @param {?} option
     * @return {?}
     */
    function (e, option) {
        Select2Utils.removeSelection(this.option, option);
        if (this.multiple && this.hideSelectedItems) {
            this.updateFilteredData();
        }
        /** @type {?} */
        var value = ((/** @type {?} */ (this.option))).map((/**
         * @param {?} op
         * @return {?}
         */
        function (op) { return op.value; }));
        if (this._control) {
            this._onChange(value);
        }
        else {
            this._value = value;
        }
        this.update.emit({
            component: this,
            value: value,
            options: Array.isArray(this.option) ? this.option : (this.option ? [this.option] : null)
        });
        this.removeOption.emit({
            component: this,
            value: value,
            removedOption: option
        });
        e.preventDefault();
        e.stopPropagation();
        if (this.isOpen) {
            this._focusSearchboxOrResultsElement();
        }
    };
    /**
     * Sets the model value. Implemented as part of ControlValueAccessor.
     * @param value
     */
    /**
     * Sets the model value. Implemented as part of ControlValueAccessor.
     * @param {?} value
     * @return {?}
     */
    Select2.prototype.writeValue = /**
     * Sets the model value. Implemented as part of ControlValueAccessor.
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this._setSelectionByValue(value);
    };
    /**
     * Saves a callback function to be invoked when the select's value
     * changes from user input. Part of the ControlValueAccessor interface
     * required to integrate with Angular's core forms API.
     *
     * @param fn Callback to be triggered when the value changes.
     */
    /**
     * Saves a callback function to be invoked when the select's value
     * changes from user input. Part of the ControlValueAccessor interface
     * required to integrate with Angular's core forms API.
     *
     * @param {?} fn Callback to be triggered when the value changes.
     * @return {?}
     */
    Select2.prototype.registerOnChange = /**
     * Saves a callback function to be invoked when the select's value
     * changes from user input. Part of the ControlValueAccessor interface
     * required to integrate with Angular's core forms API.
     *
     * @param {?} fn Callback to be triggered when the value changes.
     * @return {?}
     */
    function (fn) {
        this._onChange = fn;
    };
    /**
     * Saves a callback function to be invoked when the select is blurred
     * by the user. Part of the ControlValueAccessor interface required
     * to integrate with Angular's core forms API.
     *
     * @param fn Callback to be triggered when the component has been touched.
     */
    /**
     * Saves a callback function to be invoked when the select is blurred
     * by the user. Part of the ControlValueAccessor interface required
     * to integrate with Angular's core forms API.
     *
     * @param {?} fn Callback to be triggered when the component has been touched.
     * @return {?}
     */
    Select2.prototype.registerOnTouched = /**
     * Saves a callback function to be invoked when the select is blurred
     * by the user. Part of the ControlValueAccessor interface required
     * to integrate with Angular's core forms API.
     *
     * @param {?} fn Callback to be triggered when the component has been touched.
     * @return {?}
     */
    function (fn) {
        this._onTouched = fn;
    };
    /**
     * Sets whether the component should be disabled.
     * Implemented as part of ControlValueAccessor.
     * @param isDisabled
     */
    /**
     * Sets whether the component should be disabled.
     * Implemented as part of ControlValueAccessor.
     * @param {?} isDisabled
     * @return {?}
     */
    Select2.prototype.setDisabledState = /**
     * Sets whether the component should be disabled.
     * Implemented as part of ControlValueAccessor.
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        this.disabled = isDisabled;
    };
    /**
     * @return {?}
     */
    Select2.prototype._isErrorState = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var isInvalid = this._control && this._control.invalid;
        /** @type {?} */
        var isTouched = this._control && this._control.touched;
        /** @type {?} */
        var isSubmitted = (this._parentFormGroup && this._parentFormGroup.submitted) ||
            (this._parentForm && this._parentForm.submitted);
        return !!(isInvalid && (isTouched || isSubmitted));
    };
    /**
     * @private
     * @param {?} event
     * @param {?=} refs
     * @return {?}
     */
    Select2.prototype._testKey = /**
     * @private
     * @param {?} event
     * @param {?=} refs
     * @return {?}
     */
    function (event, refs) {
        if (refs === void 0) { refs = []; }
        return this._isKey(this._getKey(event), refs);
    };
    /**
     * @private
     * @param {?} event
     * @return {?}
     */
    Select2.prototype._getKey = /**
     * @private
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var code;
        if (event.key !== undefined) {
            code = event.key;
        }
        else if (event['keyIdentifier'] !== undefined) {
            code = event['keyIdentifier'];
        }
        else if (event['keyCode'] !== undefined) {
            code = event['keyCode'];
        }
        else {
            event.preventDefault();
        }
        return code;
    };
    /**
     * @private
     * @param {?} code
     * @param {?=} refs
     * @return {?}
     */
    Select2.prototype._isKey = /**
     * @private
     * @param {?} code
     * @param {?=} refs
     * @return {?}
     */
    function (code, refs) {
        if (refs === void 0) { refs = []; }
        return refs && refs.length > 0
            ? refs.indexOf(code) !== -1
            : false;
    };
    /**
     * Sets the selected option based on a value. If no option can be
     * found with the designated value, the select trigger is cleared.
     */
    /**
     * Sets the selected option based on a value. If no option can be
     * found with the designated value, the select trigger is cleared.
     * @private
     * @param {?} value
     * @return {?}
     */
    Select2.prototype._setSelectionByValue = /**
     * Sets the selected option based on a value. If no option can be
     * found with the designated value, the select trigger is cleared.
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        var _this = this;
        if (this.option || (value !== undefined && value !== null)) {
            /** @type {?} */
            var isArray = Array.isArray(value);
            if (this.multiple && value && !isArray) {
                throw new Error('Non array value.');
            }
            else if (this.data) {
                if (this.multiple) {
                    this.option = []; // if value is null, then empty option and return
                    if (isArray) {
                        // value is not null. Preselect value
                        /** @type {?} */
                        var selectedValues = Select2Utils.getOptionsByValue(this.data, value, this.multiple);
                        selectedValues.map((/**
                         * @param {?} item
                         * @return {?}
                         */
                        function (item) { return _this.select(item); }));
                    }
                }
                else {
                    this.select(Select2Utils.getOptionByValue(this.data, value));
                }
            }
            else if (this._control) {
                this._control.viewToModelUpdate(value);
            }
            this._changeDetectorRef.markForCheck();
        }
    };
    /** Does some manual dirty checking on the native input `value` property. */
    /**
     * Does some manual dirty checking on the native input `value` property.
     * @private
     * @return {?}
     */
    Select2.prototype._dirtyCheckNativeValue = /**
     * Does some manual dirty checking on the native input `value` property.
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var newValue = this.value;
        if (this._previousNativeValue !== newValue) {
            this._previousNativeValue = newValue;
            this._stateChanges.next();
        }
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    Select2.prototype._coerceBooleanProperty = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return value != null && "" + value !== 'false';
    };
    /**
     * @private
     * @return {?}
     */
    Select2.prototype._focusSearchboxOrResultsElement = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.isSearchboxHidden) {
            if (this.searchInputElement) {
                this.searchInputElement.focus();
            }
        }
        else {
            if (this.resultsElement) {
                this.resultsElement.focus();
            }
        }
    };
    /**
     * @private
     * @param {?} state
     * @return {?}
     */
    Select2.prototype._focus = /**
     * @private
     * @param {?} state
     * @return {?}
     */
    function (state) {
        if (!state && this.focused) {
            this.focused = state;
            this.blur.emit(this);
        }
        else if (state && !this.focused) {
            this.focused = state;
            this.focus.emit(this);
        }
    };
    /**
     * @param {?} way
     * @return {?}
     */
    Select2.prototype.onScroll = /**
     * @param {?} way
     * @return {?}
     */
    function (way) {
        this.scroll.emit({
            component: this,
            way: way,
            search: this.innerSearchText
        });
    };
    Select2.decorators = [
        { type: Component, args: [{
                    selector: 'select2',
                    template: "<div class=\"select2-label\"\n     (click)=\"toggleOpenAndClose()\">\n    <ng-content select=\"select2-label\"></ng-content>\n    <span *ngIf=\"required\"\n          class=\"select2-required\"></span>\n</div>\n<div class=\"select2 select2-container select2-container--default select2-container--focus\"\n     [class.select2-container--below]=\"!select2above\"\n     [class.select2-container--above]=\"select2above\"\n     [class.select2-container--open]=\"isOpen\"\n     [class.select2-container--disabled]=\"disabled\">\n    <div class=\"selection\"\n         #selection\n         [attr.tabindex]=\"!this.isOpen ? tabIndex : '-1'\"\n         (click)=\"toggleOpenAndClose()\"\n         (focus)=\"focusin()\"\n         (blur)=\"focusout()\"\n         (keydown)=\"openKey($event)\"\n         [class.select2-focused]=\"focused\">\n        <div class=\"select2-selection\"\n             [class.select2-selection--multiple]=\"multiple\"\n             [class.select2-selection--single]=\"!multiple\"\n             role=\"combobox\">\n            <span *ngIf=\"!multiple\"\n                  class=\"select2-selection__rendered\"\n                  [title]=\"select2Option?.label || ''\">\n                <span *ngIf=\"!select2Option\">&nbsp;</span>\n                <span *ngIf=\"select2Option\"\n                      [innerHTML]=\"select2Option.label\"></span>\n                <span [class.select2-selection__placeholder__option]=\"option\"\n                      class=\"select2-selection__placeholder\">{{placeholder}}</span>\n            </span>\n            <span (click)=\"reset($event)\"\n                  *ngIf=\"!multiple && resettable && select2Option\"\n                  class=\"select2-selection__reset\"\n                  role=\"presentation\">\u00D7</span>\n            <span *ngIf=\"!multiple\"\n                  class=\"select2-selection__arrow\"\n                  role=\"presentation\">\n            </span>\n            <ul *ngIf=\"multiple\"\n                class=\"select2-selection__rendered\">\n                <span [class.select2-selection__placeholder__option]=\"select2Options?.length > 0\"\n                      class=\"select2-selection__placeholder\">{{placeholder}}</span>\n                <li *ngFor=\"let op of option; trackBy: trackBy\"\n                    class=\"select2-selection__choice\"\n                    [title]=\"op.label\">\n                    <span (click)=\"removeSelection($event, op)\"\n                          class=\"select2-selection__choice__remove\"\n                          role=\"presentation\">\u00D7</span>\n                    <span [innerHTML]=\"op.label\"></span>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class=\"select2-container select2-container--default select2-container-dropdown\"\n         [class.select2-container--open]=\"isOpen\">\n        <div class=\"select2-dropdown\"\n             [class.select2-dropdown--below]=\"!select2above\"\n             [class.select2-dropdown--above]=\"select2above\">\n            <div class=\"select2-search select2-search--dropdown\"\n                 [class.select2-search--hide]=\"hideSearch()\">\n                <input #searchInput\n                       [id]=\"id + '-search-field'\"\n                       [value]=\"searchText\"\n                       (keydown)=\"keyDown($event)\"\n                       (keyup)=\"searchUpdate($event)\"\n                       (change)=\"prevChange($event)\"\n                       class=\"select2-search__field\"\n                       type=\"search\"\n                       role=\"textbox\"\n                       autocomplete=\"off\"\n                       autocorrect=\"off\"\n                       autocapitalize=\"off\"\n                       spellcheck=\"false\"\n                       [attr.tabindex]=\"this.isOpen ? tabIndex : '-1'\">\n            </div>\n            <div class=\"select2-results\">\n                <ul #results\n                    class=\"select2-results__options\"\n                    [style.max-height]=\"resultMaxHeight\"\n                    role=\"tree\"\n                    tabindex=\"-1\"\n                    infiniteScroll\n                    [infiniteScrollDisabled]=\"!infiniteScroll && !isOpen\"\n                    [infiniteScrollDistance]=\"infiniteScrollDistance\"\n                    [infiniteScrollThrottle]=\"infiniteScrollThrottle\"\n                    [infiniteScrollContainer]=\"results\"\n                    (scrolled)=\"onScroll('down')\"\n                    (scrolledUp)=\"onScroll('up')\"\n                    (keydown)=\"keyDown($event)\">\n                    <ng-container *ngFor=\"let groupOrOption of filteredData; index as i; trackBy:trackBy\">\n                        <li *ngIf=\"groupOrOption.options\"\n                            class=\"select2-results__option\"\n                            role=\"group\">\n                            <strong *ngIf=\"!hasTemplate(groupOrOption, 'group'); else optGroup\"\n                                    [attr.class]=\"'select2-results__group' + (groupOrOption.classes ? ' ' + groupOrOption.classes : '')\"\n                                    [innerHTML]=\"groupOrOption.label\"></strong>\n                            <ng-template #optGroup>\n                                <ng-container\n                                              *ngTemplateOutlet=\"getTemplate(groupOrOption, 'group'); context:  groupOrOption\">\n                                </ng-container>\n                            </ng-template>\n\n                            <ul class=\"select2-results__options select2-results__options--nested\">\n                                <li *ngFor=\"let option of groupOrOption.options; index as j; trackBy:trackBy\"\n                                    #result\n                                    [id]=\"option.id || id + '-option-' + i + '-' + j\"\n                                    [class]=\"getOptionStyle(option)\"\n                                    role=\"treeitem\"\n                                    [attr.aria-selected]=\"isSelected(option)\"\n                                    [attr.aria-disabled]=\"isDisabled(option)\"\n                                    (mouseenter)=\"mouseenter(option)\"\n                                    (click)=\"click(option)\">\n                                    <div *ngIf=\"!hasTemplate(option, 'option'); else liGroup\"\n                                         class=\"select2-label-content\"\n                                         [innerHTML]=\"option.label\"></div>\n                                    <ng-template #liGroup>\n                                        <ng-container\n                                                      *ngTemplateOutlet=\"getTemplate(option, 'option'); context: option\">\n                                        </ng-container>\n                                    </ng-template>\n                                </li>\n                            </ul>\n                        </li>\n                        <li *ngIf=\"!groupOrOption.options\"\n                            #result\n                            [id]=\"groupOrOption.id || id + '-option-' + i\"\n                            [class]=\"getOptionStyle(groupOrOption)\"\n                            role=\"treeitem\"\n                            [attr.aria-selected]=\"isSelected(groupOrOption)\"\n                            [attr.aria-disabled]=\"isDisabled(groupOrOption)\"\n                            (mouseenter)=\"mouseenter(groupOrOption)\"\n                            (click)=\"click(groupOrOption)\">\n                            <div *ngIf=\"!hasTemplate(groupOrOption, 'option'); else li\"\n                                 [innerHTML]=\"groupOrOption.label\"\n                                 class=\"select2-label-content\"></div>\n                            <ng-template #li>\n                                <ng-container\n                                              *ngTemplateOutlet=\"getTemplate(groupOrOption, 'option'); context:  groupOrOption\">\n                                </ng-container>\n                            </ng-template>\n                        </li>\n                    </ng-container>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div class=\"select2-subscript-wrapper\">\n        <ng-content select=\"select2-hint\"></ng-content>\n    </div>\n</div>",
                    styles: [".select2-label{color:#000;color:var(--select2-label-text-color,#000)}.select2-container{box-sizing:border-box;display:inline-block;margin:0;position:relative;vertical-align:middle;width:100%}.select2-container .select2-container-dropdown{position:absolute;width:0;opacity:0}.select2-container .select2-selection--single{box-sizing:border-box;cursor:pointer;display:block;height:28px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.select2-container .select2-selection--single .select2-selection__rendered{display:block;padding:0 0 0 8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1 1 auto}.select2-container .select2-selection--single .select2-selection__clear{position:relative}.select2-container .select2-selection--multiple{box-sizing:border-box;cursor:pointer;display:block;min-height:32px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.select2-container .select2-selection--multiple .select2-selection__rendered{display:inline-block;overflow:hidden;padding-left:8px;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-search--inline{float:left}.select2-container .select2-search--inline .select2-search__field{box-sizing:border-box;border:none;font-size:100%;margin-top:5px;padding:0}.select2-container .select2-search--inline .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-dropdown{background:#fff;background:var(--select2-dropdown-background,#fff);border:1px solid #aaa;border:1px solid var(--select2-dropdown-border-color,#aaa);border-radius:4px;border-radius:var(--select2-selection-border-radius,4px);box-sizing:border-box;display:block;position:absolute;width:100%;z-index:1051;height:0;overflow:hidden}.select2-dropdown .select2-label-content{display:contents}.select2-results{display:block}.select2-results__options{list-style:none;margin:0;padding:0}.select2-results__option{padding:6px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#000;color:var(--select2-option-text-color,#000)}.select2-results__option[aria-selected]{cursor:pointer}.select2-container.select2-container-dropdown.select2-container--open{width:100%;opacity:1}.select2-container--open .select2-dropdown{overflow:auto;height:auto}.select2-container--open .select2-dropdown--above{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0;bottom:27px;display:flex;flex-direction:column-reverse}.select2-container--open .select2-dropdown--below{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-search--dropdown{display:block;padding:4px}.select2-search--dropdown .select2-search__field{padding:4px;width:100%;box-sizing:border-box}.select2-search--dropdown .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-search--dropdown.select2-search--hide{display:none}.select2-close-mask{border:0;margin:0;padding:0;display:block;position:fixed;left:0;top:0;min-height:100%;min-width:100%;height:auto;width:auto;opacity:0;z-index:99;background:#fff}.select2-required::before{content:'*';color:red;color:var(--select2-required-color,red)}.select2-hidden-accessible{border:0!important;clip:rect(0 0 0 0)!important;height:1px!important;margin:-1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;width:1px!important}.select2-container--default .select2-selection--single{background:#fff;background:var(--select2-selection-background,#fff);border:1px solid #aaa;border:1px solid var(--select2-selection-border-color,#aaa);border-radius:4px;border-radius:var(--select2-selection-border-radius,4px);display:flex}.select2-container--default .select2-selection--single .select2-selection__rendered{color:#444;color:var(--select2-selection-text-color,#444);line-height:28px}.select2-container--default .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:700}.select2-container--default .select2-selection--single .select2-selection__placeholder{color:#999;color:var(--select2-placeholder-color,#999)}.select2-container--default .select2-selection--single .select2-selection__placeholder span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-overflow:var(--select2-placeholder-overflow,ellipsis)}.select2-container--default .select2-selection--single .select2-selection__placeholder__option{display:none}.select2-container--default .select2-selection--single .select2-selection__arrow,.select2-container--default .select2-selection--single .select2-selection__reset{display:flex;width:20px;align-items:center;justify-content:center}.select2-container--default .select2-selection--single .select2-selection__arrow::before{content:' ';border-color:#888 transparent;border-color:var(--select2-arrow-color,#888) transparent;border-style:solid;border-width:5px 4px 0;height:0;width:0}.select2-container--default .select2-selection--single .select2-selection__reset{color:#999;color:var(--select2-reset-color,#999)}.select2-container--default.select2-container--disabled .select2-selection--single{background:#eee;background:var(--select2-selection-disabled-background,#eee);cursor:default}.select2-container--default.select2-container--disabled .select2-selection--single .select2-selection__clear{display:none}.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow::before{border-color:transparent transparent #888;border-color:transparent transparent var(--select2-arrow-color,#888);border-width:0 4px 5px}.select2-container--default .select2-selection--multiple{background:#fff;background:var(--select2-selection-background,#fff);border:1px solid #aaa;border:1px solid var(--select2-selection-border-color,#aaa);border-radius:4px;border-radius:var(--select2-selection-border-radius,4px);cursor:text}.select2-container--default .select2-selection--multiple .select2-selection__rendered{flex:1 1 auto;box-sizing:border-box;list-style:none;margin:0;padding:0 5px;width:100%}.select2-container--default .select2-selection--multiple .select2-selection__rendered li{list-style:none}.select2-container--default .select2-selection--multiple .select2-selection__placeholder{display:block;width:100%;color:#999;color:var(--select2-placeholder-color,#999);margin-top:5px;float:left;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-overflow:var(--select2-placeholder-overflow,ellipsis)}.select2-container--default .select2-selection--multiple .select2-selection__placeholder__option{display:none}.select2-container--default .select2-selection--multiple .select2-selection__clear{cursor:pointer;float:right;font-weight:700;margin-top:5px;margin-right:10px}.select2-container--default .select2-selection--multiple .select2-selection__choice{color:#000;color:var(--select2-selection-choice-text-color,#000);background:#e4e4e4;background:var(--select2-selection-choice-background,#e4e4e4);border:1px solid #aaa;border:1px solid var(--select2-selection-choice-border-color,#aaa);border-radius:4px;border-radius:var(--select2-selection-border-radius,4px);cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove{color:#999;color:var(--select2-selection-choice-close-color,#999);cursor:pointer;display:inline-block;font-weight:700;margin-right:2px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover{color:#333;color:var(--select2-selection-choice-hover-close-color,#333)}.select2-container--default.select2-container--focused .select2-selection--multiple,.select2-container--default:not(.select2-container--open) .select2-focused .select2-selection--multiple,.select2-container--default:not(.select2-container--open) .select2-focused .select2-selection--single{border:1px solid #000;border:solid var(--select2-selection-focus-border-color,#000) 1px;outline:0}.select2-container--default.select2-container--disabled .select2-selection--multiple{background:#eee;background:var(--select2-selection-disabled-background,#eee);cursor:default}.select2-container--default.select2-container--disabled .select2-selection__choice__remove{display:none}.select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple,.select2-container--default.select2-container--open.select2-container--above .select2-selection--single{border-top-left-radius:0;border-top-right-radius:0}.select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple,.select2-container--default.select2-container--open.select2-container--below .select2-selection--single{border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--default .select2-search--dropdown .select2-search__field{border:1px solid #aaa;border:1px solid var(--select2-search-border-color,#aaa);background:#fff;background:1px solid var(--select2-search-background,#fff);border-radius:0;border-radius:var(--select2-search-border-radius,0)}.select2-container--default .select2-search--inline .select2-search__field{background:0 0;border:none;outline:0;box-shadow:none;-webkit-appearance:textfield}.select2-container--default .select2-results>.select2-results__options{overflow-y:auto}.select2-container--default .select2-results__option[role=group]{padding:0}.select2-container--default .select2-results__option[aria-disabled=true]{color:#999;color:var(--select2-option-disabled-text-color,#999);background:0 0;background:var(--select2-option-disabled-background,transparent)}.select2-container--default .select2-results__option[aria-selected=true]{color:#000;color:var(--select2-option-selected-text-color,#000);background:#ddd;background:var(--select2-option-selected-background,#ddd)}.select2-container--default .select2-results__option .select2-results__option{padding-left:1em}.select2-container--default .select2-results__option .select2-results__option .select2-results__group{padding-left:0}.select2-container--default .select2-results__option .select2-results__option .select2-results__option{margin-left:-1em;padding-left:2em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-2em;padding-left:3em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-3em;padding-left:4em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-4em;padding-left:5em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-5em;padding-left:6em}.select2-container--default .select2-results__option--highlighted[aria-selected]{background:#5897fb;background:var(--select2-option-highlighted-background,#5897fb);color:#fff;color:var(--select2-option-highlighted-text-color,#fff)}.select2-container--default .select2-results__option--hide{display:none}.select2-container--default .select2-results__group{cursor:default;display:block;padding:6px;color:gray;color:var(--select2-option-group-text-color,gray);background:0 0;background:var(--select2-option-group-background,transparent)}:host.nostyle .select2-dropdown{border-color:transparent}:host.nostyle .select2-selection--multiple,:host.nostyle .select2-selection--single{background:0 0;border-color:transparent}:host.nostyle .select2-container--default .select2-focused .select2-selection--multiple,:host.nostyle .select2-container--default .select2-focused .select2-selection--single,:host.nostyle .select2-container--default:not(.select2-container--open) .select2-focused .select2-selection--multiple,:host.nostyle .select2-container--default:not(.select2-container--open) .select2-focused .select2-selection--single{background:0 0;border-color:transparent}:host.material{display:inline-block;width:300px}:host.material>.select2-container{padding-bottom:1.29688em;vertical-align:inherit}:host.material>.select2-container .selection{padding:.4375em 0;border-top:.84375em solid transparent;display:inline-flex;align-items:baseline;width:100%;height:auto}:host.material .select2-container--default .select2-selection--multiple,:host.material .select2-container--default .select2-selection--single{width:100%;border:0;border-radius:0;height:24px;box-sizing:border-box}:host.material .select2-container--default .select2-selection--multiple::before,:host.material .select2-container--default .select2-selection--single::before{content:' ';display:block;position:absolute;bottom:1.65em;background:#ddd;background:var(--select2-material-underline,#ddd);height:1px;width:100%}:host.material .select2-container--default .select2-selection--multiple::after,:host.material .select2-container--default .select2-selection--single::after{content:' ';display:block;position:absolute;bottom:1.63em;background:#5a419e;background:var(--select2-material-underline-active,#5a419e);height:2px;width:0%;left:50%;transition:none}:host.material .select2-container--default .select2-selection--multiple .select2-selection__rendered,:host.material .select2-container--default .select2-selection--single .select2-selection__rendered{padding-left:1px;line-height:inherit}:host.material .select2-container--default .select2-selection--multiple .select2-selection__placeholder,:host.material .select2-container--default .select2-selection--single .select2-selection__placeholder{display:block;color:rgba(0,0,0,.38);color:var(--select2-material-placeholder-color,rgba(0,0,0,.38));transition:transform .3s;position:absolute;transform-origin:0 21px;left:0;top:20px}:host.material .select2-container--default .select2-container--open{left:0;bottom:1.6em}:host.material .select2-container--default .select2-selection__placeholder__option{transform:translateY(-1.5em) scale(.75) perspective(100px) translateZ(.001px);width:133.33333%}:host.material .select2-container--default .select2-selection__arrow{top:20px}:host.material .select2-container--default .select2-focused .select2-selection--multiple::after,:host.material .select2-container--default .select2-focused .select2-selection--single::after,:host.material .select2-container--default.select2-container--open .select2-selection--multiple::after,:host.material .select2-container--default.select2-container--open .select2-selection--single::after{transition:width .3s cubic-bezier(.12,1,.77,1),left .3s cubic-bezier(.12,1,.77,1);width:100%;left:0}:host.material .select2-container--default .select2-dropdown{border-radius:0;border:0;box-shadow:0 5px 5px rgba(0,0,0,.5)}:host.material .select2-container--default .select2-results__option--highlighted[aria-selected],:host.material .select2-container--default .select2-results__option[aria-selected=true]{background:rgba(0,0,0,.04);background:var(--select2-material-option-selected-background,rgba(0,0,0,.04));color:#000;color:var(--select2-material-option-highlighted-text-color,#000)}:host.material .select2-container--default .select2-results__option[aria-selected=true]{color:#ff5722;color:var(--select2-material-option-selected-text-color,#ff5722)}:host.material .select2-container--default.select2-container--disabled .select2-selection--multiple,:host.material .select2-container--default.select2-container--disabled .select2-selection--single{background:0 0}:host.material .select2-container--default.select2-container--disabled .select2-selection--multiple::before,:host.material .select2-container--default.select2-container--disabled .select2-selection--single::before{background:linear-gradient(to right,rgba(0,0,0,.26) 0,rgba(0,0,0,.26) 33%,transparent 0);background:var(--select2-material-underline-disabled,linear-gradient(to right,rgba(0,0,0,.26) 0,rgba(0,0,0,.26) 33%,transparent 0));background-size:4px 1px;background-repeat:repeat-x;background-position:0 bottom}:host.material.ng-invalid.ng-touched .select2-container--default .select2-selection--multiple::after,:host.material.ng-invalid.ng-touched .select2-container--default .select2-selection--multiple::before,:host.material.ng-invalid.ng-touched .select2-container--default .select2-selection--single::after,:host.material.ng-invalid.ng-touched .select2-container--default .select2-selection--single::before{background:red;background:var(--select2-material-underline-invalid,red)}:host.material:not(.select2-container--open) .select2-focused .select2-selection--multiple,:host.material:not(.select2-container--open) .select2-focused .select2-selection--single{border:0}:host.material .select2-subscript-wrapper{position:absolute;top:calc(100% - 1.72917em);font-size:75%;color:#888;color:var(--select2-hint-text-color,#888)}@supports (-moz-appearance:none){select2.material .select2-container--default .select2-selection--multiple,select2.material .select2-container--default .select2-selection--single{height:26px}}@supports (-ms-scroll-limit:0){select2.material .select2-container--default .select2-selection--multiple,select2.material .select2-container--default .select2-selection--single{height:25px}}"]
                }] }
    ];
    /** @nocollapse */
    Select2.ctorParameters = function () { return [
        { type: ChangeDetectorRef },
        { type: NgForm, decorators: [{ type: Optional }] },
        { type: FormGroupDirective, decorators: [{ type: Optional }] },
        { type: NgControl, decorators: [{ type: Self }, { type: Optional }] },
        { type: String, decorators: [{ type: Attribute, args: ['tabindex',] }] }
    ]; };
    Select2.propDecorators = {
        data: [{ type: Input }],
        minCharForSearch: [{ type: Input }],
        displaySearchStatus: [{ type: Input }],
        placeholder: [{ type: Input }],
        customSearchEnabled: [{ type: Input }],
        limitSelection: [{ type: Input }],
        listPosition: [{ type: Input }],
        multiple: [{ type: Input }],
        material: [{ type: Input }],
        noStyle: [{ type: Input }],
        infiniteScrollDistance: [{ type: Input }],
        infiniteScrollThrottle: [{ type: Input }],
        infiniteScroll: [{ type: Input }],
        editPattern: [{ type: Input }],
        templates: [{ type: Input }],
        resultMaxHeight: [{ type: Input }],
        update: [{ type: Output }],
        open: [{ type: Output }],
        close: [{ type: Output }],
        focus: [{ type: Output }],
        blur: [{ type: Output }],
        search: [{ type: Output }],
        scroll: [{ type: Output }],
        removeOption: [{ type: Output }],
        minCountForSearch: [{ type: Input }],
        id: [{ type: Input }, { type: HostBinding, args: ['id',] }],
        required: [{ type: Input }],
        disabled: [{ type: Input }],
        hideSelectedItems: [{ type: Input }],
        readonly: [{ type: Input }],
        value: [{ type: Input }],
        tabIndex: [{ type: Input }],
        resettable: [{ type: Input }],
        ariaInvalid: [{ type: HostBinding, args: ['attr.aria-invalid',] }],
        classMaterial: [{ type: HostBinding, args: ['class.material',] }],
        classNostyle: [{ type: HostBinding, args: ['class.nostyle',] }],
        select2above: [{ type: HostBinding, args: ['class.select2-above',] }],
        selection: [{ type: ViewChild, args: ['selection',] }],
        resultContainer: [{ type: ViewChild, args: ['results',] }],
        results: [{ type: ViewChildren, args: ['result',] }],
        searchInput: [{ type: ViewChild, args: ['searchInput',] }]
    };
    return Select2;
}());
export { Select2 };
if (false) {
    /**
     * data of options & optiongrps
     * @type {?}
     */
    Select2.prototype.data;
    /** @type {?} */
    Select2.prototype.minCharForSearch;
    /** @type {?} */
    Select2.prototype.displaySearchStatus;
    /** @type {?} */
    Select2.prototype.placeholder;
    /** @type {?} */
    Select2.prototype.customSearchEnabled;
    /** @type {?} */
    Select2.prototype.limitSelection;
    /** @type {?} */
    Select2.prototype.listPosition;
    /**
     * infinite scroll distance
     * @type {?}
     */
    Select2.prototype.infiniteScrollDistance;
    /**
     * infinite scroll distance
     * @type {?}
     */
    Select2.prototype.infiniteScrollThrottle;
    /**
     * use it for change the pattern of the filter search
     * @type {?}
     */
    Select2.prototype.editPattern;
    /**
     * template for formating
     * @type {?}
     */
    Select2.prototype.templates;
    /**
     * the max height of the results container when opening the select
     * @type {?}
     */
    Select2.prototype.resultMaxHeight;
    /** @type {?} */
    Select2.prototype.update;
    /** @type {?} */
    Select2.prototype.open;
    /** @type {?} */
    Select2.prototype.close;
    /** @type {?} */
    Select2.prototype.focus;
    /** @type {?} */
    Select2.prototype.blur;
    /** @type {?} */
    Select2.prototype.search;
    /** @type {?} */
    Select2.prototype.scroll;
    /** @type {?} */
    Select2.prototype.removeOption;
    /** @type {?} */
    Select2.prototype.option;
    /** @type {?} */
    Select2.prototype.isOpen;
    /** @type {?} */
    Select2.prototype.searchStyle;
    /**
     * Whether the element is focused or not.
     * @type {?}
     */
    Select2.prototype.focused;
    /** @type {?} */
    Select2.prototype.filteredData;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._minCountForSearch;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.selection;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.resultContainer;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.results;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.searchInput;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.hoveringValue;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.innerSearchText;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.isSearchboxHidden;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.selectionElement;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.searchInputElement;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype.resultsElement;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._stateChanges;
    /**
     * Tab index for the element.
     * @type {?}
     * @private
     */
    Select2.prototype._tabIndex;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._disabled;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._required;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._readonly;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._multiple;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._material;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._noStyle;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._resettable;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._hideSelectedItems;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._clickDetection;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._clickDetectionFc;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._id;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._uid;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._value;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._previousNativeValue;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._infiniteScroll;
    /**
     * View -> model callback called when select has been touched
     * @type {?}
     * @private
     */
    Select2.prototype._onTouched;
    /**
     * View -> model callback called when value changes
     * @type {?}
     * @private
     */
    Select2.prototype._onChange;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._changeDetectorRef;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._parentForm;
    /**
     * @type {?}
     * @private
     */
    Select2.prototype._parentFormGroup;
    /** @type {?} */
    Select2.prototype._control;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0Mi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZy1zZWxlY3QyLWNvbXBvbmVudC8iLCJzb3VyY2VzIjpbImxpYi9zZWxlY3QyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQ1ksU0FBUyxFQUFFLGlCQUFpQixFQUFFLFNBQVMsRUFBVyxVQUFVLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQzFGLFFBQVEsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFDN0YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF3QixrQkFBa0IsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0YsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUvQixPQUFPLEVBRXFDLFlBQVksRUFBZ0IsT0FBTyxFQUM5RSxNQUFNLGlCQUFpQixDQUFDOztJQUVyQixZQUFZLEdBQUcsQ0FBQzs7SUFFZCx1QkFBdUIsR0FBRyxDQUFDLFNBQVMsRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDO0FBRS9EO0lBd05JLGlCQUNZLGtCQUFxQyxFQUN6QixXQUFtQixFQUNuQixnQkFBb0MsRUFDN0IsUUFBbUIsRUFDdkIsUUFBZ0I7UUFKL0IsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjtRQUN6QixnQkFBVyxHQUFYLFdBQVcsQ0FBUTtRQUNuQixxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQW9CO1FBQzdCLGFBQVEsR0FBUixRQUFRLENBQVc7UUFuTnpDLHFCQUFnQixHQUFHLENBQUMsQ0FBQztRQUlyQixtQkFBYyxHQUFHLENBQUMsQ0FBQzs7OztRQWtCbkIsMkJBQXNCLEdBQUcsR0FBRyxDQUFDOzs7O1FBRzdCLDJCQUFzQixHQUFHLEdBQUcsQ0FBQzs7OztRQWU3QixvQkFBZSxHQUFHLE9BQU8s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Ozs7OztJQUNqRCxrQ0FBK0I7Ozs7OztJQW9CL0IsNkJBRUM7Ozs7OztJQUdELDRCQUVDOzs7OztJQXhCRyxxQ0FBNkM7Ozs7O0lBQzdDLDhCQUF1Qzs7Ozs7SUFDdkMsbUNBQXdEOztJQUN4RCwyQkFBOEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIEFmdGVyVmlld0luaXQsIEF0dHJpYnV0ZSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRG9DaGVjaywgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBIb3N0QmluZGluZywgSW5wdXQsXG4gICAgT25EZXN0cm95LCBPbkluaXQsIE9wdGlvbmFsLCBPdXRwdXQsIFF1ZXJ5TGlzdCwgU2VsZiwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCwgVmlld0NoaWxkcmVuXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIEZvcm1Hcm91cERpcmVjdGl2ZSwgTmdDb250cm9sLCBOZ0Zvcm0gfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHtcbiAgICBTZWxlY3QyRGF0YSwgU2VsZWN0Mkdyb3VwLCBTZWxlY3QyT3B0aW9uLCBTZWxlY3QyUmVtb3ZlRXZlbnQsIFNlbGVjdDJTY3JvbGxFdmVudCwgU2VsZWN0MlNlYXJjaEV2ZW50LFxuICAgIFNlbGVjdDJVcGRhdGVFdmVudCwgU2VsZWN0MlVwZGF0ZVZhbHVlLCBTZWxlY3QyVXRpbHMsIFNlbGVjdDJWYWx1ZSwgdGltZW91dFxufSBmcm9tICcuL3NlbGVjdDItdXRpbHMnO1xuXG5sZXQgbmV4dFVuaXF1ZUlkID0gMDtcblxuY29uc3QgZGlzcGxheVNlYXJjaFN0YXR1c0xpc3QgPSBbJ2RlZmF1bHQnLCAnaGlkZGVuJywgJ2Fsd2F5cyddO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ3NlbGVjdDInLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zZWxlY3QyLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zZWxlY3QyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgU2VsZWN0MiBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQsIE9uRGVzdHJveSwgRG9DaGVjaywgQWZ0ZXJWaWV3SW5pdCB7XG5cbiAgICAvKiogZGF0YSBvZiBvcHRpb25zICYgb3B0aW9uZ3JwcyAqL1xuICAgIEBJbnB1dCgpIGRhdGEhOiBTZWxlY3QyRGF0YTtcbiAgICBASW5wdXQoKSBtaW5DaGFyRm9yU2VhcmNoID0gMDtcbiAgICBASW5wdXQoKSBkaXNwbGF5U2VhcmNoU3RhdHVzOiAnZGVmYXVsdCcgfCAnaGlkZGVuJyB8ICdhbHdheXMnO1xuICAgIEBJbnB1dCgpIHBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gICAgQElucHV0KCkgY3VzdG9tU2VhcmNoRW5hYmxlZDogYm9vbGVhbjtcbiAgICBASW5wdXQoKSBsaW1pdFNlbGVjdGlvbiA9IDA7XG4gICAgQElucHV0KCkgbGlzdFBvc2l0aW9uOiAnYWJvdmUnIHwgJ2JlbG93JztcblxuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIGdldCBtdWx0aXBsZSgpOiBhbnkgeyByZXR1cm4gdGhpcy5fbXVsdGlwbGU7IH1cbiAgICBwdWJsaWMgc2V0IG11bHRpcGxlKHZhbHVlOiBhbnkpIHsgdGhpcy5fbXVsdGlwbGUgPSB0aGlzLl9jb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpOyB0aGlzLm5nT25Jbml0KCk7IH1cblxuICAgIC8qKiB1c2UgdGhlIG1hdGVyaWFsIHN0eWxlICovXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgZ2V0IG1hdGVyaWFsKCk6IGFueSB7IHJldHVybiB0aGlzLl9tYXRlcmlhbDsgfVxuICAgIHB1YmxpYyBzZXQgbWF0ZXJpYWwodmFsdWU6IGFueSkgeyB0aGlzLl9tYXRlcmlhbCA9IHRoaXMuX2NvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7IH1cblxuICAgIC8qKiB1c2Ugbm8gc3R5bGUgKi9cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBnZXQgbm9TdHlsZSgpOiBhbnkgeyByZXR1cm4gdGhpcy5fbm9TdHlsZTsgfVxuICAgIHB1YmxpYyBzZXQgbm9TdHlsZSh2YWx1ZTogYW55KSB7IHRoaXMuX25vU3R5bGUgPSB0aGlzLl9jb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpOyB9XG5cbiAgICAvKiogaW5maW5pdGUgc2Nyb2xsIGRpc3RhbmNlICovXG4gICAgQElucHV0KCkgaW5maW5pdGVTY3JvbGxEaXN0YW5jZSA9IDEuNTtcblxuICAgIC8qKiBpbmZpbml0ZSBzY3JvbGwgZGlzdGFuY2UgKi9cbiAgICBASW5wdXQoKSBpbmZpbml0ZVNjcm9sbFRocm90dGxlID0gMTUwO1xuXG4gICAgLyoqIGluZmluaXRlIHNjcm9sbCBhY3RpdmF0ZWQgKi9cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBnZXQgaW5maW5pdGVTY3JvbGwoKTogYW55IHsgcmV0dXJuIHRoaXMuX2luZmluaXRlU2Nyb2xsOyB9XG4gICAgcHVibGljIHNldCBpbmZpbml0ZVNjcm9sbCh2YWx1ZTogYW55KSB7IHRoaXMuX2luZmluaXRlU2Nyb2xsID0gdGhpcy5fY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTsgfVxuXG4gICAgLyoqIHVzZSBpdCBmb3IgY2hhbmdlIHRoZSBwYXR0ZXJuIG9mIHRoZSBmaWx0ZXIgc2VhcmNoICovXG4gICAgQElucHV0KCkgZWRpdFBhdHRlcm46IChzdHI6IHN0cmluZykgPT4gc3RyaW5nO1xuXG4gICAgLyoqIHRlbXBsYXRlIGZvciBmb3JtYXRpbmcgKi9cbiAgICBASW5wdXQoKSB0ZW1wbGF0ZXM6IChUZW1wbGF0ZVJlZjxhbnk+IHwgeyBba2V5OiBzdHJpbmddOiBUZW1wbGF0ZVJlZjxhbnk+IH0pO1xuXG5cbiAgICAvKiogdGhlIG1heCBoZWlnaHQgb2YgdGhlIHJlc3VsdHMgY29udGFpbmVyIHdoZW4gb3BlbmluZyB0aGUgc2VsZWN0ICovXG4gICAgQElucHV0KCkgcmVzdWx0TWF4SGVpZ2h0ID0gJzIwMHB4JztcblxuICAgIEBPdXRwdXQoKSB1cGRhdGUgPSBuZXcgRXZlbnRFbWl0dGVyPFNlbGVjdDJVcGRhdGVFdmVudDxTZWxlY3QyVXBkYXRlVmFsdWU+PigpO1xuICAgIEBPdXRwdXQoKSBvcGVuID0gbmV3IEV2ZW50RW1pdHRlcjxTZWxlY3QyPigpO1xuICAgIEBPdXRwdXQoKSBjbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0Mj4oKTtcbiAgICBAT3V0cHV0KCkgZm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyPFNlbGVjdDI+KCk7XG4gICAgQE91dHB1dCgpIGJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyPFNlbGVjdDI+KCk7XG4gICAgQE91dHB1dCgpIHNlYXJjaCA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0MlNlYXJjaEV2ZW50PFNlbGVjdDJVcGRhdGVWYWx1ZT4+KCk7XG4gICAgQE91dHB1dCgpIHNjcm9sbCA9IG5ldyBFdmVudEVtaXR0ZXI8U2VsZWN0MlNjcm9sbEV2ZW50PigpO1xuICAgIEBPdXRwdXQoKSByZW1vdmVPcHRpb24gPSBuZXcgRXZlbnRFbWl0dGVyPFNlbGVjdDJSZW1vdmVFdmVudDxTZWxlY3QyVXBkYXRlVmFsdWU+PigpO1xuXG4gICAgb3B0aW9uOiBTZWxlY3QyT3B0aW9uIHwgU2VsZWN0Mk9wdGlvbltdIHwgbnVsbCA9IG51bGw7XG4gICAgaXNPcGVuID0gZmFsc2U7XG4gICAgc2VhcmNoU3R5bGU6IHN0cmluZztcblxuICAgIC8qKiBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIGZvY3VzZWQgb3Igbm90LiAqL1xuICAgIGZvY3VzZWQgPSBmYWxzZTtcblxuICAgIGZpbHRlcmVkRGF0YTogU2VsZWN0MkRhdGE7XG5cbiAgICBnZXQgc2VsZWN0Mk9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpcGxlID8gdGhpcy5vcHRpb24gYXMgU2VsZWN0Mk9wdGlvbltdIDogbnVsbDtcbiAgICB9XG5cbiAgICBnZXQgc2VsZWN0Mk9wdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyBudWxsIDogdGhpcy5vcHRpb24gYXMgU2VsZWN0Mk9wdGlvbjtcbiAgICB9XG5cbiAgICBnZXQgc2VhcmNoVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJTZWFyY2hUZXh0O1xuICAgIH1cblxuICAgIHNldCBzZWFyY2hUZXh0KHRleHQ6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5jdXN0b21TZWFyY2hFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaC5lbWl0KHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuX3ZhbHVlLFxuICAgICAgICAgICAgICAgIHNlYXJjaDogdGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbm5lclNlYXJjaFRleHQgPSB0ZXh0O1xuICAgIH1cblxuICAgIC8qKiBtaW5pbWFsIGRhdGEgb2Ygc2hvdyB0aGUgc2VhcmNoIGZpZWxkICovXG4gICAgQElucHV0KClcbiAgICBnZXQgbWluQ291bnRGb3JTZWFyY2goKTogbnVtYmVyIHwgc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21pbkNvdW50Rm9yU2VhcmNoO1xuICAgIH1cblxuICAgIHNldCBtaW5Db3VudEZvclNlYXJjaCh2YWx1ZTogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX21pbkNvdW50Rm9yU2VhcmNoID0gdmFsdWU7XG4gICAgICAgIHRoaXMudXBkYXRlU2VhcmNoQm94KCk7XG4gICAgfVxuXG4gICAgLyoqIFVuaXF1ZSBpZCBvZiB0aGUgZWxlbWVudC4gKi9cbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnaWQnKVxuICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuX2lkOyB9XG4gICAgc2V0IGlkKHZhbHVlOiBzdHJpbmcpIHsgdGhpcy5faWQgPSB2YWx1ZSB8fCB0aGlzLl91aWQ7IH1cblxuICAgIC8qKiBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIHJlcXVpcmVkLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZ2V0IHJlcXVpcmVkKCkgeyByZXR1cm4gdGhpcy5fcmVxdWlyZWQ7IH1cbiAgICBzZXQgcmVxdWlyZWQodmFsdWU6IGFueSkgeyB0aGlzLl9yZXF1aXJlZCA9IHRoaXMuX2NvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7IH1cblxuICAgIC8qKiBXaGV0aGVyIHNlbGVjdGVkIGl0ZW1zIHNob3VsZCBiZSBoaWRkZW4uICovXG4gICAgQElucHV0KClcbiAgICBnZXQgZGlzYWJsZWQoKSB7IHJldHVybiB0aGlzLl9jb250cm9sID8gdGhpcy5fY29udHJvbC5kaXNhYmxlZCA6IHRoaXMuX2Rpc2FibGVkOyB9XG4gICAgc2V0IGRpc2FibGVkKHZhbHVlOiBhbnkpIHsgdGhpcy5fZGlzYWJsZWQgPSB0aGlzLl9jb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpOyB9XG5cbiAgICAvKiogV2hldGhlciBpdGVtcyBhcmUgaGlkZGVuIHdoZW4gaGFzLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZ2V0IGhpZGVTZWxlY3RlZEl0ZW1zKCkgeyByZXR1cm4gdGhpcy5faGlkZVNlbGVjdGVkSXRlbXM7IH1cbiAgICBzZXQgaGlkZVNlbGVjdGVkSXRlbXModmFsdWU6IGFueSkgeyB0aGlzLl9oaWRlU2VsZWN0ZWRJdGVtcyA9IHRoaXMuX2NvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7IH1cblxuICAgIC8qKiBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIHJlYWRvbmx5LiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZ2V0IHJlYWRvbmx5KCkgeyByZXR1cm4gdGhpcy5fcmVhZG9ubHk7IH1cbiAgICBzZXQgcmVhZG9ubHkodmFsdWU6IGFueSkgeyB0aGlzLl9yZWFkb25seSA9IHRoaXMuX2NvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7IH1cblxuICAgIC8qKiBUaGUgaW5wdXQgZWxlbWVudCdzIHZhbHVlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0IHZhbHVlKHZhbHVlOiBTZWxlY3QyVXBkYXRlVmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMudGVzdFZhbHVlQ2hhbmdlKHRoaXMuX3ZhbHVlLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBUYWIgaW5kZXggZm9yIHRoZSBzZWxlY3QyIGVsZW1lbnQuICovXG4gICAgQElucHV0KClcbiAgICBnZXQgdGFiSW5kZXgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgPyAtMSA6IHRoaXMuX3RhYkluZGV4O1xuICAgIH1cblxuICAgIHNldCB0YWJJbmRleCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLl90YWJJbmRleCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIHJlc2V0IHdpdGggbm8gc2VsZWN0ZWQgdmFsdWUgKi9cbiAgICBASW5wdXQoKVxuICAgIGdldCByZXNldHRhYmxlKCkgeyByZXR1cm4gdGhpcy5fcmVzZXR0YWJsZTsgfVxuICAgIHNldCByZXNldHRhYmxlKHZhbHVlOiBhbnkpIHsgdGhpcy5fcmVzZXR0YWJsZSA9IHRoaXMuX2NvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7IH1cblxuICAgIEBIb3N0QmluZGluZygnYXR0ci5hcmlhLWludmFsaWQnKVxuICAgIGdldCBhcmlhSW52YWxpZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRXJyb3JTdGF0ZSgpO1xuICAgIH1cblxuICAgIEBIb3N0QmluZGluZygnY2xhc3MubWF0ZXJpYWwnKVxuICAgIGdldCBjbGFzc01hdGVyaWFsKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbCA9PT0gJycgfHwgdGhpcy5tYXRlcmlhbCA9PT0gdHJ1ZSB8fCB0aGlzLm1hdGVyaWFsID09PSAndHJ1ZSc7XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5ub3N0eWxlJylcbiAgICBnZXQgY2xhc3NOb3N0eWxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub1N0eWxlID09PSAnJyB8fCB0aGlzLm5vU3R5bGUgPT09IHRydWUgfHwgdGhpcy5ub1N0eWxlID09PSAndHJ1ZSc7XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zZWxlY3QyLWFib3ZlJylcbiAgICBnZXQgc2VsZWN0MmFib3ZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0UG9zaXRpb24gPT09ICdhYm92ZSc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbWluQ291bnRGb3JTZWFyY2g/OiBudW1iZXIgfCBzdHJpbmc7XG5cbiAgICBAVmlld0NoaWxkKCdzZWxlY3Rpb24nKSBwcml2YXRlIHNlbGVjdGlvbjogRWxlbWVudFJlZjtcbiAgICBAVmlld0NoaWxkKCdyZXN1bHRzJykgcHJpdmF0ZSByZXN1bHRDb250YWluZXI6IEVsZW1lbnRSZWY7XG4gICAgQFZpZXdDaGlsZHJlbigncmVzdWx0JykgcHJpdmF0ZSByZXN1bHRzOiBRdWVyeUxpc3Q8RWxlbWVudFJlZj47XG4gICAgQFZpZXdDaGlsZCgnc2VhcmNoSW5wdXQnKSBwcml2YXRlIHNlYXJjaElucHV0OiBFbGVtZW50UmVmO1xuXG4gICAgcHJpdmF0ZSBob3ZlcmluZ1ZhbHVlOiBTZWxlY3QyVmFsdWUgfCBudWxsIHwgdW5kZWZpbmVkID0gbnVsbDtcbiAgICBwcml2YXRlIGlubmVyU2VhcmNoVGV4dCA9ICcnO1xuICAgIHByaXZhdGUgaXNTZWFyY2hib3hIaWRkZW46IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBzZWxlY3Rpb25FbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHNlYXJjaElucHV0RWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSByZXN1bHRzRWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cbiAgICBwcml2YXRlIF9zdGF0ZUNoYW5nZXMgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gICAgLyoqIFRhYiBpbmRleCBmb3IgdGhlIGVsZW1lbnQuICovXG4gICAgcHJpdmF0ZSBfdGFiSW5kZXg6IG51bWJlcjtcblxuICAgIHByaXZhdGUgX2Rpc2FibGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfcmVxdWlyZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIF9yZWFkb25seSA9IGZhbHNlO1xuICAgIHByaXZhdGUgX211bHRpcGxlID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfbWF0ZXJpYWwgPSBmYWxzZTtcbiAgICBwcml2YXRlIF9ub1N0eWxlID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfcmVzZXR0YWJsZSA9IGZhbHNlO1xuICAgIHByaXZhdGUgX2hpZGVTZWxlY3RlZEl0ZW1zID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfY2xpY2tEZXRlY3Rpb24gPSBmYWxzZTtcbiAgICBwcml2YXRlIF9jbGlja0RldGVjdGlvbkZjOiAoZTogTW91c2VFdmVudCkgPT4gdm9pZDtcbiAgICBwcml2YXRlIF9pZDogc3RyaW5nO1xuICAgIHByaXZhdGUgX3VpZCA9IGBzZWxlY3QyLSR7bmV4dFVuaXF1ZUlkKyt9YDtcbiAgICBwcml2YXRlIF92YWx1ZTogU2VsZWN0MlVwZGF0ZVZhbHVlO1xuICAgIHByaXZhdGUgX3ByZXZpb3VzTmF0aXZlVmFsdWU6IFNlbGVjdDJVcGRhdGVWYWx1ZTtcbiAgICBwcml2YXRlIF9pbmZpbml0ZVNjcm9sbCA9IHRydWU7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICAgICAgICBAT3B0aW9uYWwoKSBwcml2YXRlIF9wYXJlbnRGb3JtOiBOZ0Zvcm0sXG4gICAgICAgIEBPcHRpb25hbCgpIHByaXZhdGUgX3BhcmVudEZvcm1Hcm91cDogRm9ybUdyb3VwRGlyZWN0aXZlLFxuICAgICAgICBAU2VsZigpIEBPcHRpb25hbCgpIHB1YmxpYyBfY29udHJvbDogTmdDb250cm9sLFxuICAgICAgICBAQXR0cmlidXRlKCd0YWJpbmRleCcpIHRhYkluZGV4OiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgdGhpcy5pZCA9IHRoaXMuaWQ7XG4gICAgICAgIHRoaXMuX3RhYkluZGV4ID0gcGFyc2VJbnQodGFiSW5kZXgsIDEwKSB8fCAwO1xuXG4gICAgICAgIGlmICh0aGlzLl9jb250cm9sKSB7XG4gICAgICAgICAgICB0aGlzLl9jb250cm9sLnZhbHVlQWNjZXNzb3IgPSB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2xpY2tEZXRlY3Rpb25GYyA9IHRoaXMuY2xpY2tEZXRlY3Rpb24uYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICAvKiogVmlldyAtPiBtb2RlbCBjYWxsYmFjayBjYWxsZWQgd2hlbiBzZWxlY3QgaGFzIGJlZW4gdG91Y2hlZCAqL1xuICAgIHByaXZhdGUgX29uVG91Y2hlZCA9ICgpID0+IHtcbiAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cblxuICAgIC8qKiBWaWV3IC0+IG1vZGVsIGNhbGxiYWNrIGNhbGxlZCB3aGVuIHZhbHVlIGNoYW5nZXMgKi9cbiAgICBwcml2YXRlIF9vbkNoYW5nZTogKHZhbHVlOiBhbnkpID0+IHZvaWQgPSAoKSA9PiB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gU2VsZWN0MlV0aWxzLmdldE9wdGlvbnNCeVZhbHVlKFxuICAgICAgICAgICAgdGhpcy5kYXRhLFxuICAgICAgICAgICAgdGhpcy5fY29udHJvbCA/IHRoaXMuX2NvbnRyb2wudmFsdWUgOiB0aGlzLnZhbHVlLFxuICAgICAgICAgICAgdGhpcy5tdWx0aXBsZVxuICAgICAgICApO1xuICAgICAgICBpZiAob3B0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbiA9IG9wdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob3B0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy5ob3ZlcmluZ1ZhbHVlID0gdGhpcy52YWx1ZSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVTZWFyY2hCb3goKTtcbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uRWxlbWVudCA9IHRoaXMuc2VsZWN0aW9uLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc2VhcmNoSW5wdXRFbGVtZW50ID0gdGhpcy5zZWFyY2hJbnB1dC5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICB0aGlzLnJlc3VsdHNFbGVtZW50ID0gdGhpcy5yZXN1bHRDb250YWluZXIubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgICB9XG5cbiAgICBuZ0RvQ2hlY2soKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU2VhcmNoQm94KCk7XG4gICAgICAgIHRoaXMuX2RpcnR5Q2hlY2tOYXRpdmVWYWx1ZSgpO1xuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2NsaWNrRGV0ZWN0aW9uRmMpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNlYXJjaEJveCgpIHtcbiAgICAgICAgY29uc3QgaGlkZGVuID0gdGhpcy5jdXN0b21TZWFyY2hFbmFibGVkXG4gICAgICAgICAgICA/IGZhbHNlXG4gICAgICAgICAgICA6IFNlbGVjdDJVdGlscy5pc1NlYXJjaGJveEhpZGRleCh0aGlzLmRhdGEsIHRoaXMuX21pbkNvdW50Rm9yU2VhcmNoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTZWFyY2hib3hIaWRkZW4gIT09IGhpZGRlbikge1xuICAgICAgICAgICAgdGhpcy5pc1NlYXJjaGJveEhpZGRlbiA9IGhpZGRlbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhpZGVTZWFyY2goKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGRpc3BsYXlTZWFyY2hTdGF0dXMgPSBkaXNwbGF5U2VhcmNoU3RhdHVzTGlzdC5pbmRleE9mKHRoaXMuZGlzcGxheVNlYXJjaFN0YXR1cykgPiAtMVxuICAgICAgICAgICAgPyB0aGlzLmRpc3BsYXlTZWFyY2hTdGF0dXNcbiAgICAgICAgICAgIDogJ2RlZmF1bHQnO1xuICAgICAgICByZXR1cm4gKGRpc3BsYXlTZWFyY2hTdGF0dXMgPT09ICdkZWZhdWx0JyAmJiB0aGlzLmlzU2VhcmNoYm94SGlkZGVuKSB8fCBkaXNwbGF5U2VhcmNoU3RhdHVzID09PSAnaGlkZGVuJztcbiAgICB9XG5cbiAgICBnZXRPcHRpb25TdHlsZShvcHRpb246IFNlbGVjdDJPcHRpb24pIHtcbiAgICAgICAgcmV0dXJuICdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbiAnICtcbiAgICAgICAgICAgIChvcHRpb24uaGlkZSA/ICdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0taGlkZSAnIDogJycpICtcbiAgICAgICAgICAgIChvcHRpb24udmFsdWUgPT09IHRoaXMuaG92ZXJpbmdWYWx1ZSA/ICdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0taGlnaGxpZ2h0ZWQgJyA6ICcnKSArXG4gICAgICAgICAgICAob3B0aW9uLmNsYXNzZXMgfHwgJycpO1xuICAgIH1cblxuICAgIG1vdXNlZW50ZXIob3B0aW9uOiBTZWxlY3QyT3B0aW9uKSB7XG4gICAgICAgIGlmICghb3B0aW9uLmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhvdmVyaW5nVmFsdWUgPSBvcHRpb24udmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGljayhvcHRpb246IFNlbGVjdDJPcHRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMudGVzdFNlbGVjdGlvbihvcHRpb24pKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdChvcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXQoZTogTW91c2VFdmVudCkge1xuICAgICAgICB0aGlzLnNlbGVjdChudWxsKTtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgcHJldkNoYW5nZShldmVudDogRXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgdG9nZ2xlT3BlbkFuZENsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZvY3VzKHRydWUpO1xuICAgICAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcblxuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuaW5uZXJTZWFyY2hUZXh0ID0gJyc7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcmVkRGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5fZm9jdXNTZWFyY2hib3hPclJlc3VsdHNFbGVtZW50KCk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb246IFNlbGVjdDJPcHRpb24gPSB0aGlzLm9wdGlvbiBpbnN0YW5jZW9mIEFycmF5ID8gdGhpcy5vcHRpb25bMF0gOiB0aGlzLm9wdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxGcm9tT3B0aW9uKG9wdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzRWxlbWVudC5zY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vcGVuLmVtaXQodGhpcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlLmVtaXQodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc09wZW4gJiYgIXRoaXMuX2NsaWNrRGV0ZWN0aW9uKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2NsaWNrRGV0ZWN0aW9uRmMsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGlja0RldGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cblxuICAgIGhhc1RlbXBsYXRlKG9wdGlvbjogKFNlbGVjdDJPcHRpb24gfCBTZWxlY3QyR3JvdXApLCBkZWZhdXQ6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZXMgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZlxuICAgICAgICAgICAgfHwgdGhpcy50ZW1wbGF0ZXMgJiYgdGhpcy50ZW1wbGF0ZXNbb3B0aW9uLnRlbXBsYXRlSWRdIGluc3RhbmNlb2YgVGVtcGxhdGVSZWZcbiAgICAgICAgICAgIHx8IHRoaXMudGVtcGxhdGVzICYmIHRoaXMudGVtcGxhdGVzW2RlZmF1dF0gaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZjtcbiAgICB9XG5cbiAgICBnZXRUZW1wbGF0ZShvcHRpb246IChTZWxlY3QyT3B0aW9uIHwgU2VsZWN0Mkdyb3VwKSwgZGVmYXV0OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzVGVtcGxhdGUob3B0aW9uLCBkZWZhdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZXNbb3B0aW9uLnRlbXBsYXRlSWRdXG4gICAgICAgICAgICAgICAgfHwgdGhpcy50ZW1wbGF0ZXNbZGVmYXV0XVxuICAgICAgICAgICAgICAgIHx8IHRoaXMudGVtcGxhdGVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0ZXN0U2VsZWN0aW9uKG9wdGlvbjogU2VsZWN0Mk9wdGlvbikge1xuICAgICAgICBpZiAob3B0aW9uLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5tdWx0aXBsZSB8fFxuICAgICAgICAgICAgIXRoaXMubGltaXRTZWxlY3Rpb24gfHxcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodGhpcy5fdmFsdWUpICYmIHRoaXMuX3ZhbHVlLmxlbmd0aCA8IHRoaXMubGltaXRTZWxlY3Rpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0ZXN0VmFsdWVDaGFuZ2UodmFsdWUxOiBTZWxlY3QyVXBkYXRlVmFsdWUsIHZhbHVlMjogU2VsZWN0MlVwZGF0ZVZhbHVlKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICh2YWx1ZTEgPT09IG51bGwgfHwgdmFsdWUxID09PSB1bmRlZmluZWQpICYmICh2YWx1ZTIgPT09IG51bGwgfHwgdmFsdWUyID09PSB1bmRlZmluZWQpIHx8XG4gICAgICAgICAgICB2YWx1ZTEgPT09IHZhbHVlMlxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZVxuICAgICAgICAgICAgJiYgdmFsdWUxICYmICh2YWx1ZTEgYXMgU2VsZWN0MlZhbHVlW10pLmxlbmd0aFxuICAgICAgICAgICAgJiYgdmFsdWUyICYmICh2YWx1ZTIgYXMgU2VsZWN0MlZhbHVlW10pLmxlbmd0aFxuICAgICAgICAgICAgJiYgKHZhbHVlMSBhcyBTZWxlY3QyVmFsdWVbXSkubGVuZ3RoID09PSAodmFsdWUyIGFzIFNlbGVjdDJWYWx1ZVtdKS5sZW5ndGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUxIG9mICh2YWx1ZTEgYXMgU2VsZWN0MlZhbHVlW10pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVzdCA9ICh2YWx1ZTIgYXMgU2VsZWN0MlZhbHVlW10pLmluZGV4T2YoZTEpID4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKCF0ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUZpbHRlcmVkRGF0YSgpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5kYXRhO1xuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgdGhpcy5oaWRlU2VsZWN0ZWRJdGVtcykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFNlbGVjdDJVdGlscy5nZXRGaWx0ZXJlZFNlbGVjdGVkRGF0YShyZXN1bHQsIHRoaXMub3B0aW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmN1c3RvbVNlYXJjaEVuYWJsZWQgJiYgdGhpcy5zZWFyY2hUZXh0ICYmIHRoaXMuc2VhcmNoVGV4dC5sZW5ndGggPj0gK3RoaXMubWluQ2hhckZvclNlYXJjaCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFNlbGVjdDJVdGlscy5nZXRGaWx0ZXJlZERhdGEocmVzdWx0LCB0aGlzLnNlYXJjaFRleHQsIHRoaXMuZWRpdFBhdHRlcm4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoU2VsZWN0MlV0aWxzLnZhbHVlSXNOb3RJbkZpbHRlcmVkRGF0YShyZXN1bHQsIHRoaXMuaG92ZXJpbmdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVyaW5nVmFsdWUgPSBTZWxlY3QyVXRpbHMuZ2V0Rmlyc3RBdmFpbGFibGVPcHRpb24ocmVzdWx0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5maWx0ZXJlZERhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGlja0RldGVjdGlvbihlOiBNb3VzZUV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5pZlBhcmVudENvbnRhaW5zQ2xhc3MoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQsICdzZWxlY3Rpb24nKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuICYmICF0aGlzLmlmUGFyZW50Q29udGFpbnNDbGFzcyhlLnRhcmdldCBhcyBIVE1MRWxlbWVudCwgJ3NlbGVjdDItZHJvcGRvd24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlT3BlbkFuZENsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaWZQYXJlbnRDb250YWluc0lkKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50LCB0aGlzLl9pZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrRXhpdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNPcGVuICYmICF0aGlzLmlmUGFyZW50Q29udGFpbnNJZChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCwgdGhpcy5faWQpKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZU9wZW5BbmRDbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5jbGlja0V4aXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY2xpY2tFeGl0KCkge1xuICAgICAgICB0aGlzLl9mb2N1cyhmYWxzZSk7XG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xpY2tEZXRlY3Rpb25GYyk7XG4gICAgICAgIHRoaXMuX2NsaWNrRGV0ZWN0aW9uID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpZlBhcmVudENvbnRhaW5zQ2xhc3MoZWxlbWVudDogSFRNTEVsZW1lbnQsIGNzc0NsYXNzOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGFyZW50RWxlbWVudEJ5Q2xhc3MoZWxlbWVudCwgY3NzQ2xhc3MpICE9PSBudWxsO1xuICAgIH1cblxuICAgIHByaXZhdGUgaWZQYXJlbnRDb250YWluc0lkKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBhcmVudEVsZW1lbnRCeUlkKGVsZW1lbnQsIGlkKSAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBhcmVudEVsZW1lbnRCeUNsYXNzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjc3NDbGFzczogc3RyaW5nKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbkNsYXNzZXMoZWxlbWVudCwgY3NzQ2xhc3MudHJpbSgpLnNwbGl0KC9cXHMrLykpKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudC5wYXJlbnRFbGVtZW50XG4gICAgICAgICAgICA/IHRoaXMuZ2V0UGFyZW50RWxlbWVudEJ5Q2xhc3MoZWxlbWVudC5wYXJlbnRFbGVtZW50LCBjc3NDbGFzcylcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBhcmVudEVsZW1lbnRCeUlkKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpZDogc3RyaW5nKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuaWQgPT09IGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudC5wYXJlbnRFbGVtZW50XG4gICAgICAgICAgICA/IHRoaXMuZ2V0UGFyZW50RWxlbWVudEJ5SWQoZWxlbWVudC5wYXJlbnRFbGVtZW50LCBpZClcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbnRhaW5DbGFzc2VzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjc3NDbGFzc2VzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBjc3NDbGFzcyBvZiBjc3NDbGFzc2VzKSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNzc0NsYXNzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmb2N1c2luKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZvY3VzKHRydWUpO1xuICAgIH1cblxuICAgIGZvY3Vzb3V0KCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25FbGVtZW50ICYmICF0aGlzLnNlbGVjdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3QyLWZvY3VzZWQnKSkge1xuICAgICAgICAgICAgdGhpcy5fZm9jdXMoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5fb25Ub3VjaGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIG1vdmVVcCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxGcm9tT3B0aW9uKFNlbGVjdDJVdGlscy5nZXRQcmV2aW91c09wdGlvbih0aGlzLmZpbHRlcmVkRGF0YSwgdGhpcy5ob3ZlcmluZ1ZhbHVlKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtb3ZlRG93bigpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxGcm9tT3B0aW9uKFNlbGVjdDJVdGlscy5nZXROZXh0T3B0aW9uKHRoaXMuZmlsdGVyZWREYXRhLCB0aGlzLmhvdmVyaW5nVmFsdWUpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVNjcm9sbEZyb21PcHRpb24ob3B0aW9uOiBTZWxlY3QyT3B0aW9uKSB7XG4gICAgICAgIGlmIChvcHRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuaG92ZXJpbmdWYWx1ZSA9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGRvbUVsZW1lbnQgPSB0aGlzLnJlc3VsdHMuZmluZChyID0+IHIubmF0aXZlRWxlbWVudC5pbm5lclRleHQudHJpbSgpID09PSBvcHRpb24ubGFiZWwpO1xuICAgICAgICAgICAgaWYgKGRvbUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHNFbGVtZW50LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdENsaWVudFJlY3QgPSB0aGlzLnJlc3VsdHNFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkNsaWVudFJlY3QgPSBkb21FbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzRWxlbWVudC5zY3JvbGxUb3AgPSBvcHRpb25DbGllbnRSZWN0LnRvcCAtIGxpc3RDbGllbnRSZWN0LnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2VsZWN0QnlFbnRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaG92ZXJpbmdWYWx1ZSkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gU2VsZWN0MlV0aWxzLmdldE9wdGlvbkJ5VmFsdWUodGhpcy5kYXRhLCB0aGlzLmhvdmVyaW5nVmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Qob3B0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdChvcHRpb246IFNlbGVjdDJPcHRpb24gfCBudWxsKSB7XG4gICAgICAgIGxldCB2YWx1ZTogYW55O1xuICAgICAgICBpZiAob3B0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbiBhcyBTZWxlY3QyT3B0aW9uW107XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBvcHRpb25zLmZpbmRJbmRleChvcCA9PiBvcC52YWx1ZSA9PT0gb3B0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaChvcHRpb24pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAodGhpcy5vcHRpb24gYXMgU2VsZWN0Mk9wdGlvbltdKS5tYXAob3AgPT4gb3AudmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbiA9IG9wdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZS5lbWl0KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMub3B0aW9uLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vcHRpb24gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgdGhpcy5oaWRlU2VsZWN0ZWRJdGVtcykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJlZERhdGEoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9jb250cm9sKSB7XG4gICAgICAgICAgICB0aGlzLl9vbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGUuZW1pdCh7XG4gICAgICAgICAgICBjb21wb25lbnQ6IHRoaXMsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBvcHRpb25zOiBBcnJheS5pc0FycmF5KHRoaXMub3B0aW9uKSA/IHRoaXMub3B0aW9uIDogKHRoaXMub3B0aW9uID8gW3RoaXMub3B0aW9uXSA6IG51bGwpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGtleURvd24oZTogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5fdGVzdEtleShlLCBbJ0Fycm93RG93bicsIDQwXSkpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZURvd24oKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl90ZXN0S2V5KGUsIFsnQXJyb3dVcCcsIDM4XSkpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZVVwKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fdGVzdEtleShlLCBbJ0VudGVyJywgMTNdKSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RCeUVudGVyKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fdGVzdEtleShlLCBbJ0VzY2FwZScsICdUYWInLCA5LCAyN10pICYmIHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZU9wZW5BbmRDbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5fZm9jdXMoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3BlbktleShlOiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXN0S2V5KGUsIFsnQXJyb3dEb3duJywgJ0Fycm93VXAnLCAnRW50ZXInLCA0MCwgMzgsIDEzXSkpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlT3BlbkFuZENsb3NlKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fdGVzdEtleShlLCBbJ0VzY2FwZScsICdUYWInLCA5LCAyN10pKSB7XG4gICAgICAgICAgICB0aGlzLl9mb2N1cyhmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLl9vblRvdWNoZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRyYWNrQnkoX2luZGV4OiBudW1iZXIsIGl0ZW06IFNlbGVjdDJPcHRpb24pOiBhbnkge1xuICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTtcbiAgICB9XG5cbiAgICBzZWFyY2hVcGRhdGUoZTogRXZlbnQpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcmVkRGF0YSgpO1xuICAgIH1cblxuICAgIGlzU2VsZWN0ZWQob3B0aW9uOiBTZWxlY3QyT3B0aW9uKSB7XG4gICAgICAgIHJldHVybiBTZWxlY3QyVXRpbHMuaXNTZWxlY3RlZCh0aGlzLm9wdGlvbiwgb3B0aW9uLCB0aGlzLm11bHRpcGxlKTtcbiAgICB9XG5cbiAgICBpc0Rpc2FibGVkKG9wdGlvbjogU2VsZWN0Mk9wdGlvbikge1xuICAgICAgICByZXR1cm4gb3B0aW9uLmRpc2FibGVkID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgICB9XG5cbiAgICByZW1vdmVTZWxlY3Rpb24oZTogTW91c2VFdmVudCwgb3B0aW9uOiBTZWxlY3QyT3B0aW9uKSB7XG4gICAgICAgIFNlbGVjdDJVdGlscy5yZW1vdmVTZWxlY3Rpb24odGhpcy5vcHRpb24sIG9wdGlvbik7XG5cbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgdGhpcy5oaWRlU2VsZWN0ZWRJdGVtcykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJlZERhdGEoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhbHVlID0gKHRoaXMub3B0aW9uIGFzIFNlbGVjdDJPcHRpb25bXSkubWFwKG9wID0+IG9wLnZhbHVlKTtcblxuICAgICAgICBpZiAodGhpcy5fY29udHJvbCkge1xuICAgICAgICAgICAgdGhpcy5fb25DaGFuZ2UodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlLmVtaXQoe1xuICAgICAgICAgICAgY29tcG9uZW50OiB0aGlzLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbikgPyB0aGlzLm9wdGlvbiA6ICh0aGlzLm9wdGlvbiA/IFt0aGlzLm9wdGlvbl0gOiBudWxsKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZW1vdmVPcHRpb24uZW1pdCh7XG4gICAgICAgICAgICBjb21wb25lbnQ6IHRoaXMsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICByZW1vdmVkT3B0aW9uOiBvcHRpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5fZm9jdXNTZWFyY2hib3hPclJlc3VsdHNFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBtb2RlbCB2YWx1ZS4gSW1wbGVtZW50ZWQgYXMgcGFydCBvZiBDb250cm9sVmFsdWVBY2Nlc3Nvci5cbiAgICAgKiBAcGFyYW0gdmFsdWVcbiAgICAgKi9cbiAgICB3cml0ZVZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fc2V0U2VsZWN0aW9uQnlWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2F2ZXMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIHNlbGVjdCdzIHZhbHVlXG4gICAgICogY2hhbmdlcyBmcm9tIHVzZXIgaW5wdXQuIFBhcnQgb2YgdGhlIENvbnRyb2xWYWx1ZUFjY2Vzc29yIGludGVyZmFjZVxuICAgICAqIHJlcXVpcmVkIHRvIGludGVncmF0ZSB3aXRoIEFuZ3VsYXIncyBjb3JlIGZvcm1zIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbiBDYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy5cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuOiAodmFsdWU6IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9vbkNoYW5nZSA9IGZuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNhdmVzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCB3aGVuIHRoZSBzZWxlY3QgaXMgYmx1cnJlZFxuICAgICAqIGJ5IHRoZSB1c2VyLiBQYXJ0IG9mIHRoZSBDb250cm9sVmFsdWVBY2Nlc3NvciBpbnRlcmZhY2UgcmVxdWlyZWRcbiAgICAgKiB0byBpbnRlZ3JhdGUgd2l0aCBBbmd1bGFyJ3MgY29yZSBmb3JtcyBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm4gQ2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiB0b3VjaGVkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiB7fSk6IHZvaWQge1xuICAgICAgICB0aGlzLl9vblRvdWNoZWQgPSBmbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHdoZXRoZXIgdGhlIGNvbXBvbmVudCBzaG91bGQgYmUgZGlzYWJsZWQuXG4gICAgICogSW1wbGVtZW50ZWQgYXMgcGFydCBvZiBDb250cm9sVmFsdWVBY2Nlc3Nvci5cbiAgICAgKiBAcGFyYW0gaXNEaXNhYmxlZFxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgICB9XG5cbiAgICBfaXNFcnJvclN0YXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBpc0ludmFsaWQgPSB0aGlzLl9jb250cm9sICYmIHRoaXMuX2NvbnRyb2wuaW52YWxpZDtcbiAgICAgICAgY29uc3QgaXNUb3VjaGVkID0gdGhpcy5fY29udHJvbCAmJiB0aGlzLl9jb250cm9sLnRvdWNoZWQ7XG4gICAgICAgIGNvbnN0IGlzU3VibWl0dGVkID0gKHRoaXMuX3BhcmVudEZvcm1Hcm91cCAmJiB0aGlzLl9wYXJlbnRGb3JtR3JvdXAuc3VibWl0dGVkKSB8fFxuICAgICAgICAgICAgKHRoaXMuX3BhcmVudEZvcm0gJiYgdGhpcy5fcGFyZW50Rm9ybS5zdWJtaXR0ZWQpO1xuXG4gICAgICAgIHJldHVybiAhIShpc0ludmFsaWQgJiYgKGlzVG91Y2hlZCB8fCBpc1N1Ym1pdHRlZCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3Rlc3RLZXkoZXZlbnQ6IEtleWJvYXJkRXZlbnQsIHJlZnM6IChudW1iZXIgfCBzdHJpbmcpW10gPSBbXSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNLZXkodGhpcy5fZ2V0S2V5KGV2ZW50KSwgcmVmcyk7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIF9nZXRLZXkoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiBudW1iZXIgfCBzdHJpbmcge1xuICAgICAgICBsZXQgY29kZTogbnVtYmVyIHwgc3RyaW5nO1xuXG4gICAgICAgIGlmIChldmVudC5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29kZSA9IGV2ZW50LmtleTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudFsna2V5SWRlbnRpZmllciddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvZGUgPSBldmVudFsna2V5SWRlbnRpZmllciddO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50WydrZXlDb2RlJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29kZSA9IGV2ZW50WydrZXlDb2RlJ107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNLZXkoY29kZTogbnVtYmVyIHwgc3RyaW5nLCByZWZzOiAobnVtYmVyIHwgc3RyaW5nKVtdID0gW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHJlZnMgJiYgcmVmcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHJlZnMuaW5kZXhPZihjb2RlKSAhPT0gLTFcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2VsZWN0ZWQgb3B0aW9uIGJhc2VkIG9uIGEgdmFsdWUuIElmIG5vIG9wdGlvbiBjYW4gYmVcbiAgICAgKiBmb3VuZCB3aXRoIHRoZSBkZXNpZ25hdGVkIHZhbHVlLCB0aGUgc2VsZWN0IHRyaWdnZXIgaXMgY2xlYXJlZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIF9zZXRTZWxlY3Rpb25CeVZhbHVlKHZhbHVlOiBhbnkgfCBhbnlbXSk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5vcHRpb24gfHwgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpKSB7XG4gICAgICAgICAgICBjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB2YWx1ZSAmJiAhaXNBcnJheSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm9uIGFycmF5IHZhbHVlLicpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbiA9IFtdOyAvLyBpZiB2YWx1ZSBpcyBudWxsLCB0aGVuIGVtcHR5IG9wdGlvbiBhbmQgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YWx1ZSBpcyBub3QgbnVsbC4gUHJlc2VsZWN0IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFZhbHVlczogYW55ID0gU2VsZWN0MlV0aWxzLmdldE9wdGlvbnNCeVZhbHVlKHRoaXMuZGF0YSwgdmFsdWUsIHRoaXMubXVsdGlwbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZXMubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gdGhpcy5zZWxlY3QoaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChTZWxlY3QyVXRpbHMuZ2V0T3B0aW9uQnlWYWx1ZSh0aGlzLmRhdGEsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9jb250cm9sKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29udHJvbC52aWV3VG9Nb2RlbFVwZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIERvZXMgc29tZSBtYW51YWwgZGlydHkgY2hlY2tpbmcgb24gdGhlIG5hdGl2ZSBpbnB1dCBgdmFsdWVgIHByb3BlcnR5LiAqL1xuICAgIHByaXZhdGUgX2RpcnR5Q2hlY2tOYXRpdmVWYWx1ZSgpIHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLnZhbHVlO1xuXG4gICAgICAgIGlmICh0aGlzLl9wcmV2aW91c05hdGl2ZVZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNOYXRpdmVWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fc3RhdGVDaGFuZ2VzLm5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2NvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGAke3ZhbHVlfWAgIT09ICdmYWxzZSc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZm9jdXNTZWFyY2hib3hPclJlc3VsdHNFbGVtZW50KCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTZWFyY2hib3hIaWRkZW4pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXJjaElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoSW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRzRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c0VsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2ZvY3VzKHN0YXRlOiBib29sZWFuKSB7XG4gICAgICAgIGlmICghc3RhdGUgJiYgdGhpcy5mb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWQgPSBzdGF0ZTtcbiAgICAgICAgICAgIHRoaXMuYmx1ci5lbWl0KHRoaXMpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlICYmICF0aGlzLmZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZCA9IHN0YXRlO1xuICAgICAgICAgICAgdGhpcy5mb2N1cy5lbWl0KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25TY3JvbGwod2F5OiAndXAnIHwgJ2Rvd24nKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsLmVtaXQoe1xuICAgICAgICAgICAgY29tcG9uZW50OiB0aGlzLFxuICAgICAgICAgICAgd2F5LFxuICAgICAgICAgICAgc2VhcmNoOiB0aGlzLmlubmVyU2VhcmNoVGV4dFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=